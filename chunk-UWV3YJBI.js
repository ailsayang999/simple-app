import{a as Ne,b as He}from"./chunk-XKKKF63H.js";import"./chunk-GIJAMQDZ.js";import{k as Te}from"./chunk-FR2JHQ2I.js";import{$ as U,Ab as L,Cb as H,Da as x,Db as ge,Eb as K,Fb as ke,Gb as q,Hb as B,Ia as T,Ib as P,Nb as ze,Oa as de,Ob as Re,Qa as he,Qb as me,Rb as _,Sb as pe,Ta as $,Tb as J,Za as ve,_a as xe,a as f,aa as V,b as v,dc as fe,eb as we,gb as Y,hb as j,ja as ae,kb as ce,lb as ue,mb as O,nb as b,ob as y,pb as C,qa as le,qb as Ee,rb as Ce,vc as De,wb as Q}from"./chunk-UT54V5MC.js";var h=class l{static getElements(r,e=document){if(typeof r=="string"){let t="getElementById"in e?e:void 0;if(t&&!isNaN(+r[0])){let s=t.getElementById(r);return s?[s]:[]}let i=e.querySelectorAll(r);if(!i.length&&r[0]!=="."&&r[0]!=="#"&&(i=e.querySelectorAll("."+r),i.length||(i=e.querySelectorAll("#"+r)),!i.length)){let s=e.querySelector(`[gs-id="${r}"]`);return s?[s]:[]}return Array.from(i)}return[r]}static getElement(r,e=document){if(typeof r=="string"){let t="getElementById"in e?e:void 0;if(!r.length)return null;if(t&&r[0]==="#")return t.getElementById(r.substring(1));if(r[0]==="#"||r[0]==="."||r[0]==="[")return e.querySelector(r);if(t&&!isNaN(+r[0]))return t.getElementById(r);let i=e.querySelector(r);return t&&!i&&(i=t.getElementById(r)),i||(i=e.querySelector("."+r)),i}return r}static lazyLoad(r){return r.lazyLoad||r.grid?.opts?.lazyLoad&&r.lazyLoad!==!1}static createDiv(r,e){let t=document.createElement("div");return r.forEach(i=>{i&&t.classList.add(i)}),e?.appendChild(t),t}static shouldSizeToContent(r,e=!1){return r?.grid&&(e?r.sizeToContent===!0||r.grid.opts.sizeToContent===!0&&r.sizeToContent===void 0:!!r.sizeToContent||r.grid.opts.sizeToContent&&r.sizeToContent!==!1)}static isIntercepted(r,e){return!(r.y>=e.y+e.h||r.y+r.h<=e.y||r.x+r.w<=e.x||r.x>=e.x+e.w)}static isTouching(r,e){return l.isIntercepted(r,{x:e.x-.5,y:e.y-.5,w:e.w+1,h:e.h+1})}static areaIntercept(r,e){let t=r.x>e.x?r.x:e.x,i=r.x+r.w<e.x+e.w?r.x+r.w:e.x+e.w;if(i<=t)return 0;let s=r.y>e.y?r.y:e.y,n=r.y+r.h<e.y+e.h?r.y+r.h:e.y+e.h;return n<=s?0:(i-t)*(n-s)}static area(r){return r.w*r.h}static sort(r,e=1){return r.sort((i,s)=>{let n=e*((i.y??1e4)-(s.y??1e4));return n===0?e*((i.x??1e4)-(s.x??1e4)):n})}static find(r,e){return e?r.find(t=>t.id===e):void 0}static toBool(r){return typeof r=="boolean"?r:typeof r=="string"?(r=r.toLowerCase(),!(r===""||r==="no"||r==="false"||r==="0")):!!r}static toNumber(r){return r===null||r.length===0?void 0:Number(r)}static parseHeight(r){let e,t="px";if(typeof r=="string")if(r==="auto"||r==="")e=0;else{let i=r.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!i)throw new Error(`Invalid height val = ${r}`);t=i[2]||"px",e=parseFloat(i[1])}else e=r;return{h:e,unit:t}}static defaults(r,...e){return e.forEach(t=>{for(let i in t){if(!t.hasOwnProperty(i))return;r[i]===null||r[i]===void 0?r[i]=t[i]:typeof t[i]=="object"&&typeof r[i]=="object"&&l.defaults(r[i],t[i])}}),r}static same(r,e){if(typeof r!="object")return r==e;if(typeof r!=typeof e||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}static copyPos(r,e,t=!1){return e.x!==void 0&&(r.x=e.x),e.y!==void 0&&(r.y=e.y),e.w!==void 0&&(r.w=e.w),e.h!==void 0&&(r.h=e.h),t&&(e.minW&&(r.minW=e.minW),e.minH&&(r.minH=e.minH),e.maxW&&(r.maxW=e.maxW),e.maxH&&(r.maxH=e.maxH)),r}static samePos(r,e){return r&&e&&r.x===e.x&&r.y===e.y&&(r.w||1)===(e.w||1)&&(r.h||1)===(e.h||1)}static sanitizeMinMax(r){r.minW||delete r.minW,r.minH||delete r.minH,r.maxW||delete r.maxW,r.maxH||delete r.maxH}static removeInternalAndSame(r,e){if(!(typeof r!="object"||typeof e!="object")&&!(Array.isArray(r)||Array.isArray(e)))for(let t in r){let i=r[t],s=e[t];t[0]==="_"||i===s?delete r[t]:i&&typeof i=="object"&&s!==void 0&&(l.removeInternalAndSame(i,s),Object.keys(i).length||delete r[t])}}static removeInternalForSave(r,e=!0){for(let t in r)(t[0]==="_"||r[t]===null||r[t]===void 0)&&delete r[t];delete r.grid,e&&delete r.el,r.autoPosition||delete r.autoPosition,r.noResize||delete r.noResize,r.noMove||delete r.noMove,r.locked||delete r.locked,(r.w===1||r.w===r.minW)&&delete r.w,(r.h===1||r.h===r.minH)&&delete r.h}static throttle(r,e){let t=!1;return(...i)=>{t||(t=!0,setTimeout(()=>{r(...i),t=!1},e))}}static removePositioningStyles(r){let e=r.style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")}static getScrollElement(r){if(!r)return document.scrollingElement||document.documentElement;let e=getComputedStyle(r);return/(auto|scroll)/.test(e.overflow+e.overflowY)?r:l.getScrollElement(r.parentElement)}static updateScrollPosition(r,e,t){let i=l.getScrollElement(r);if(!i)return;let s=r.getBoundingClientRect(),n=i.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight,a=s.bottom-Math.min(n.bottom,o),u=s.top-Math.max(n.top,0),c=i.scrollTop;u<0&&t<0?r.offsetHeight>n.height?i.scrollTop+=t:i.scrollTop+=Math.abs(u)>Math.abs(t)?t:u:a>0&&t>0&&(r.offsetHeight>n.height?i.scrollTop+=t:i.scrollTop+=a>t?t:a),e.top+=i.scrollTop-c}static updateScrollResize(r,e,t){let i=l.getScrollElement(e),s=i.clientHeight,n=i===l.getScrollElement()?0:i.getBoundingClientRect().top,o=r.clientY-n,a=o<t,u=o>s-t;a?i.scrollBy({behavior:"smooth",top:o-t}):u&&i.scrollBy({behavior:"smooth",top:t-(s-o)})}static clone(r){return r==null||typeof r!="object"?r:r instanceof Array?[...r]:f({},r)}static cloneDeep(r){let e=["parentGrid","el","grid","subGrid","engine"],t=l.clone(r);for(let i in t)t.hasOwnProperty(i)&&typeof t[i]=="object"&&i.substring(0,2)!=="__"&&!e.find(s=>s===i)&&(t[i]=l.cloneDeep(r[i]));return t}static cloneNode(r){let e=r.cloneNode(!0);return e.removeAttribute("id"),e}static appendTo(r,e){let t;typeof e=="string"?t=l.getElement(e):t=e,t&&t.appendChild(r)}static addElStyles(r,e){if(e instanceof Object)for(let t in e)e.hasOwnProperty(t)&&(Array.isArray(e[t])?e[t].forEach(i=>{r.style[t]=i}):r.style[t]=e[t])}static initEvent(r,e){let t={type:e.type},i={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:e.target?e.target:r.target};return["altKey","ctrlKey","metaKey","shiftKey"].forEach(s=>t[s]=r[s]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(s=>t[s]=r[s]),f(f({},t),i)}static simulateMouseEvent(r,e,t){let i=r,s=new MouseEvent(e,{bubbles:!0,composed:!0,cancelable:!0,view:window,detail:1,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,ctrlKey:i.ctrlKey??!1,altKey:i.altKey??!1,shiftKey:i.shiftKey??!1,metaKey:i.metaKey??!1,button:0,relatedTarget:r.target});(t||r.target).dispatchEvent(s)}static getValuesFromTransformedElement(r){let e=document.createElement("div");l.addElStyles(e,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),r.appendChild(e);let t=e.getBoundingClientRect();return r.removeChild(e),e.remove(),{xScale:1/t.width,yScale:1/t.height,xOffset:t.left,yOffset:t.top}}static swap(r,e,t){if(!r)return;let i=r[e];r[e]=r[t],r[t]=i}static canBeRotated(r){return!(!r||r.w===r.h||r.locked||r.noResize||r.grid?.opts.disableResize||r.minW&&r.minW===r.maxW||r.minH&&r.minH===r.maxH)}};var ye=(()=>{class l{constructor(e={}){this.addedNodes=[],this.removedNodes=[],this.defaultColumn=12,this.column=e.column||this.defaultColumn,this.column>this.defaultColumn&&(this.defaultColumn=this.column),this.maxRow=e.maxRow,this._float=e.float,this.nodes=e.nodes||[],this.onChange=e.onChange}batchUpdate(e=!0,t=!0){return!!this.batchMode===e?this:(this.batchMode=e,e?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,t&&this._packNodes(),this._notify()),this)}_useEntireRowArea(e,t){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!e._moving||e._skipDown||t.y<=e.y)}_fixCollisions(e,t=e,i,s={}){if(this.sortNodes(-1),i=i||this.collide(e,t),!i)return!1;if(e._moving&&!s.nested&&!this.float&&this.swap(e,i))return!0;let n=t;!this._loading&&this._useEntireRowArea(e,t)&&(n={x:0,w:this.column,y:t.y,h:t.h},i=this.collide(e,n,s.skip));let o=!1,a={nested:!0,pack:!1},u=0;for(;i=i||this.collide(e,n,s.skip);){if(u++>this.nodes.length*2)throw new Error("Infinite collide check");let c;if(i.locked||this._loading||e._moving&&!e._skipDown&&t.y>e.y&&!this.float&&(!this.collide(i,v(f({},i),{y:e.y}),e)||!this.collide(i,v(f({},i),{y:t.y-i.h}),e))){e._skipDown=e._skipDown||t.y>e.y;let d=f(v(f({},t),{y:i.y+i.h}),a);c=this._loading&&h.samePos(e,d)?!0:this.moveNode(e,d),(i.locked||this._loading)&&c?h.copyPos(t,e):!i.locked&&c&&s.pack&&(this._packNodes(),t.y=i.y+i.h,h.copyPos(e,t)),o=o||c}else c=this.moveNode(i,f(v(f({},i),{y:t.y+t.h,skip:e}),a));if(!c)return o;i=void 0}return o}collide(e,t=e,i){let s=e._id,n=i?._id;return this.nodes.find(o=>o._id!==s&&o._id!==n&&h.isIntercepted(o,t))}collideAll(e,t=e,i){let s=e._id,n=i?._id;return this.nodes.filter(o=>o._id!==s&&o._id!==n&&h.isIntercepted(o,t))}directionCollideCoverage(e,t,i){if(!t.rect||!e._rect)return;let s=e._rect,n=f({},t.rect);n.y>s.y?(n.h+=n.y-s.y,n.y=s.y):n.h+=s.y-n.y,n.x>s.x?(n.w+=n.x-s.x,n.x=s.x):n.w+=s.x-n.x;let o,a=.5;for(let u of i){if(u.locked||!u._rect)break;let c=u._rect,d=Number.MAX_VALUE,g=Number.MAX_VALUE;s.y<c.y?d=(n.y+n.h-c.y)/c.h:s.y+s.h>c.y+c.h&&(d=(c.y+c.h-n.y)/c.h),s.x<c.x?g=(n.x+n.w-c.x)/c.w:s.x+s.w>c.x+c.w&&(g=(c.x+c.w-n.x)/c.w);let p=Math.min(g,d);p>a&&(a=p,o=u)}return t.collide=o,o}cacheRects(e,t,i,s,n,o){return this.nodes.forEach(a=>a._rect={y:a.y*t+i,x:a.x*e+o,w:a.w*e-o-s,h:a.h*t-i-n}),this}swap(e,t){if(!t||t.locked||!e||e.locked)return!1;function i(){let n=t.x,o=t.y;return t.x=e.x,t.y=e.y,e.h!=t.h?(e.x=n,e.y=t.y+t.h):e.w!=t.w?(e.x=t.x+t.w,e.y=o):(e.x=n,e.y=o),e._dirty=t._dirty=!0,!0}let s;if(e.w===t.w&&e.h===t.h&&(e.x===t.x||e.y===t.y)&&(s=h.isTouching(e,t)))return i();if(s!==!1){if(e.w===t.w&&e.x===t.x&&(s||(s=h.isTouching(e,t)))){if(t.y<e.y){let n=e;e=t,t=n}return i()}if(s!==!1){if(e.h===t.h&&e.y===t.y&&(s||(s=h.isTouching(e,t)))){if(t.x<e.x){let n=e;e=t,t=n}return i()}return!1}}}isAreaEmpty(e,t,i,s){let n={x:e||0,y:t||0,w:i||1,h:s||1};return!this.collide(n)}compact(e="compact",t=!0){if(this.nodes.length===0)return this;t&&this.sortNodes();let i=this.batchMode;i||this.batchUpdate();let s=this._inColumnResize;s||(this._inColumnResize=!0);let n=this.nodes;return this.nodes=[],n.forEach((o,a,u)=>{let c;o.locked||(o.autoPosition=!0,e==="list"&&a&&(c=u[a-1])),this.addNode(o,!1,c)}),s||delete this._inColumnResize,i||this.batchUpdate(!1),this}set float(e){this._float!==e&&(this._float=e||!1,e||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(e=1){return this.nodes=h.sort(this.nodes,e),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(e=>{if(e._updating||e._orig===void 0||e.y===e._orig.y)return;let t=e.y;for(;t>e._orig.y;)--t,this.collide(e,{x:e.x,y:t,w:e.w,h:e.h})||(e._dirty=!0,e.y=t)}):this.nodes.forEach((e,t)=>{if(!e.locked)for(;e.y>0;){let i=t===0?0:e.y-1;if(!(t===0||!this.collide(e,{x:e.x,y:i,w:e.w,h:e.h})))break;e._dirty=e.y!==i,e.y=i}}),this)}prepareNode(e,t){e._id=e._id??l._idSeq++;let i=e.id;if(i){let n=1;for(;this.nodes.find(o=>o.id===e.id&&o!==e);)e.id=i+"_"+n++}(e.x===void 0||e.y===void 0||e.x===null||e.y===null)&&(e.autoPosition=!0);let s={x:0,y:0,w:1,h:1};return h.defaults(e,s),e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,h.sanitizeMinMax(e),typeof e.x=="string"&&(e.x=Number(e.x)),typeof e.y=="string"&&(e.y=Number(e.y)),typeof e.w=="string"&&(e.w=Number(e.w)),typeof e.h=="string"&&(e.h=Number(e.h)),isNaN(e.x)&&(e.x=s.x,e.autoPosition=!0),isNaN(e.y)&&(e.y=s.y,e.autoPosition=!0),isNaN(e.w)&&(e.w=s.w),isNaN(e.h)&&(e.h=s.h),this.nodeBoundFix(e,t),e}nodeBoundFix(e,t){let i=e._orig||h.copyPos({},e);if(e.maxW&&(e.w=Math.min(e.w||1,e.maxW)),e.maxH&&(e.h=Math.min(e.h||1,e.maxH)),e.minW&&(e.w=Math.max(e.w||1,e.minW)),e.minH&&(e.h=Math.max(e.h||1,e.minH)),(e.x||0)+(e.w||1)>this.column&&this.column<this.defaultColumn&&!this._inColumnResize&&!this.skipCacheUpdate&&e._id!=null&&this.findCacheLayout(e,this.defaultColumn)===-1){let n=f({},e);n.autoPosition||n.x===void 0?(delete n.x,delete n.y):n.x=Math.min(this.defaultColumn-1,n.x),n.w=Math.min(this.defaultColumn,n.w||1),this.cacheOneLayout(n,this.defaultColumn)}return e.w>this.column?e.w=this.column:e.w<1&&(e.w=1),this.maxRow&&e.h>this.maxRow?e.h=this.maxRow:e.h<1&&(e.h=1),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.w>this.column&&(t?e.w=this.column-e.x:e.x=this.column-e.w),this.maxRow&&e.y+e.h>this.maxRow&&(t?e.h=this.maxRow-e.y:e.y=this.maxRow-e.h),h.samePos(e,i)||(e._dirty=!0),this}getDirtyNodes(e){return e?this.nodes.filter(t=>t._dirty&&!h.samePos(t,t._orig)):this.nodes.filter(t=>t._dirty)}_notify(e){if(this.batchMode||!this.onChange)return this;let t=(e||[]).concat(this.getDirtyNodes());return this.onChange(t),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(e=>{delete e._dirty,delete e._lastTried}),this)}saveInitial(){return this.nodes.forEach(e=>{e._orig=h.copyPos({},e),delete e._dirty}),this._hasLocked=this.nodes.some(e=>e.locked),this}restoreInitial(){return this.nodes.forEach(e=>{!e._orig||h.samePos(e,e._orig)||(h.copyPos(e,e._orig),e._dirty=!0)}),this._notify(),this}findEmptyPosition(e,t=this.nodes,i=this.column,s){let n=s?s.y*i+(s.x+s.w):0,o=!1;for(let a=n;!o;++a){let u=a%i,c=Math.floor(a/i);if(u+e.w>i)continue;let d={x:u,y:c,w:e.w,h:e.h};t.find(g=>h.isIntercepted(d,g))||((e.x!==u||e.y!==c)&&(e._dirty=!0),e.x=u,e.y=c,delete e.autoPosition,o=!0)}return o}addNode(e,t=!1,i){let s=this.nodes.find(o=>o._id===e._id);if(s)return s;this._inColumnResize?this.nodeBoundFix(e):this.prepareNode(e),delete e._temporaryRemoved,delete e._removeDOM;let n;return e.autoPosition&&this.findEmptyPosition(e,this.nodes,this.column,i)&&(delete e.autoPosition,n=!0),this.nodes.push(e),t&&this.addedNodes.push(e),n||this._fixCollisions(e),this.batchMode||this._packNodes()._notify(),e}removeNode(e,t=!0,i=!1){return this.nodes.find(s=>s._id===e._id)?(i&&this.removedNodes.push(e),t&&(e._removeDOM=!0),this.nodes=this.nodes.filter(s=>s._id!==e._id),e._isAboutToRemove||this._packNodes(),this._notify([e]),this):this}removeAll(e=!0,t=!0){if(delete this._layouts,!this.nodes.length)return this;e&&this.nodes.forEach(s=>s._removeDOM=!0);let i=this.nodes;return this.removedNodes=t?i:[],this.nodes=[],this._notify(i)}moveNodeCheck(e,t){if(!this.changedPosConstrain(e,t))return!1;if(t.pack=!0,!this.maxRow)return this.moveNode(e,t);let i,s=new l({column:this.column,float:this.float,nodes:this.nodes.map(o=>o._id===e._id?(i=f({},o),i):f({},o))});if(!i)return!1;let n=s.moveNode(i,t)&&s.getRow()<=Math.max(this.getRow(),this.maxRow);if(!n&&!t.resizing&&t.collide){let o=t.collide.el.gridstackNode;if(this.swap(e,o))return this._notify(),!0}return n?(s.nodes.filter(o=>o._dirty).forEach(o=>{let a=this.nodes.find(u=>u._id===o._id);a&&(h.copyPos(a,o),a._dirty=!0)}),this._notify(),!0):!1}willItFit(e){if(delete e._willFitPos,!this.maxRow)return!0;let t=new l({column:this.column,float:this.float,nodes:this.nodes.map(s=>f({},s))}),i=f({},e);return this.cleanupNode(i),delete i.el,delete i._id,delete i.content,delete i.grid,t.addNode(i),t.getRow()<=this.maxRow?(e._willFitPos=h.copyPos({},i),!0):!1}changedPosConstrain(e,t){return t.w=t.w||e.w,t.h=t.h||e.h,e.x!==t.x||e.y!==t.y?!0:(e.maxW&&(t.w=Math.min(t.w,e.maxW)),e.maxH&&(t.h=Math.min(t.h,e.maxH)),e.minW&&(t.w=Math.max(t.w,e.minW)),e.minH&&(t.h=Math.max(t.h,e.minH)),e.w!==t.w||e.h!==t.h)}moveNode(e,t){if(!e||!t)return!1;let i;t.pack===void 0&&!this.batchMode&&(i=t.pack=!0),typeof t.x!="number"&&(t.x=e.x),typeof t.y!="number"&&(t.y=e.y),typeof t.w!="number"&&(t.w=e.w),typeof t.h!="number"&&(t.h=e.h);let s=e.w!==t.w||e.h!==t.h,n=h.copyPos({},e,!0);if(h.copyPos(n,t),this.nodeBoundFix(n,s),h.copyPos(t,n),!t.forceCollide&&h.samePos(e,t))return!1;let o=h.copyPos({},e),a=this.collideAll(e,n,t.skip),u=!0;if(a.length){let c=e._moving&&!t.nested,d=c?this.directionCollideCoverage(e,t,a):a[0];if(c&&d&&e.grid?.opts?.subGridDynamic&&!e.grid._isTemp){let g=h.areaIntercept(t.rect,d._rect),p=h.area(t.rect),E=h.area(d._rect);g/(p<E?p:E)>.8&&(d.grid.makeSubGrid(d.el,void 0,e),d=void 0)}d?u=!this._fixCollisions(e,n,d,t):(u=!1,i&&delete t.pack)}return u&&!h.samePos(e,n)&&(e._dirty=!0,h.copyPos(e,n)),t.pack&&this._packNodes()._notify(),!h.samePos(e,o)}getRow(){return this.nodes.reduce((e,t)=>Math.max(e,t.y+t.h),0)}beginUpdate(e){return e._updating||(e._updating=!0,delete e._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let e=this.nodes.find(t=>t._updating);return e&&(delete e._updating,delete e._skipDown),this}save(e=!0,t,i){let s=this._layouts?.length||0,n;s&&(i?i!==this.column&&(n=this._layouts[i]):this.column!==s-1&&(n=this._layouts[s-1]));let o=[];return this.sortNodes(),this.nodes.forEach(a=>{let u=n?.find(d=>d._id===a._id),c=f(f({},a),u||{});h.removeInternalForSave(c,!e),t&&t(a,c),o.push(c)}),o}layoutsNodesChange(e){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((t,i)=>{if(!t||i===this.column)return this;if(i<this.column)this._layouts[i]=void 0;else{let s=i/this.column;e.forEach(n=>{if(!n._orig)return;let o=t.find(a=>a._id===n._id);o&&(o.y>=0&&n.y!==n._orig.y&&(o.y+=n.y-n._orig.y,o.y<0&&(o.y=0)),n.x!==n._orig.x&&(o.x=Math.round(n.x*s),o.x<0&&(o.x=0)),n.w!==n._orig.w&&(o.w=Math.round(n.w*s),o.w<1&&(o.w=1)))})}}),this)}columnChanged(e,t,i="moveScale"){if(!this.nodes.length||!t||e===t)return this;let s=i==="compact"||i==="list";s&&this.sortNodes(1),t<e&&this.cacheLayout(this.nodes,e),this.batchUpdate();let n=[],o=s?this.nodes:h.sort(this.nodes,-1);if(t>e&&this._layouts){let a=this._layouts[t]||[],u=this._layouts.length-1;!a.length&&e!==u&&this._layouts[u]?.length&&(e=u,this._layouts[u].forEach(c=>{let d=o.find(g=>g._id===c._id);d&&(!s&&!c.autoPosition&&(d.x=c.x??d.x,d.y=c.y??d.y),d.w=c.w??d.w,(c.x==null||c.y===void 0)&&(d.autoPosition=!0))})),a.forEach(c=>{let d=o.findIndex(g=>g._id===c._id);if(d!==-1){let g=o[d];if(s){g.w=c.w;return}(c.autoPosition||isNaN(c.x)||isNaN(c.y))&&this.findEmptyPosition(c,n),c.autoPosition||(g.x=c.x??g.x,g.y=c.y??g.y,g.w=c.w??g.w,n.push(g)),o.splice(d,1)}})}if(s)this.compact(i,!1);else{if(o.length)if(typeof i=="function")i(t,e,n,o);else{let a=s||i==="none"?1:t/e,u=i==="move"||i==="moveScale",c=i==="scale"||i==="moveScale";o.forEach(d=>{d.x=t===1?0:u?Math.round(d.x*a):Math.min(d.x,t-1),d.w=t===1||e===1?1:c?Math.round(d.w*a)||1:Math.min(d.w,t),n.push(d)}),o=[]}n=h.sort(n,-1),this._inColumnResize=!0,this.nodes=[],n.forEach(a=>{this.addNode(a,!1),delete a._orig})}return this.nodes.forEach(a=>delete a._orig),this.batchUpdate(!1,!s),delete this._inColumnResize,this}cacheLayout(e,t,i=!1){let s=[];return e.forEach((n,o)=>{if(n._id===void 0){let a=n.id?this.nodes.find(u=>u.id===n.id):void 0;n._id=a?._id??l._idSeq++}s[o]={x:n.x,y:n.y,w:n.w,_id:n._id}}),this._layouts=i?[]:this._layouts||[],this._layouts[t]=s,this}cacheOneLayout(e,t){e._id=e._id??l._idSeq++;let i={x:e.x,y:e.y,w:e.w,_id:e._id};(e.autoPosition||e.x===void 0)&&(delete i.x,delete i.y,e.autoPosition&&(i.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[t]=this._layouts[t]||[];let s=this.findCacheLayout(e,t);return s===-1?this._layouts[t].push(i):this._layouts[t][s]=i,this}findCacheLayout(e,t){return this._layouts?.[t]?.findIndex(i=>i._id===e._id)??-1}removeNodeFromLayoutCache(e){if(this._layouts)for(let t=0;t<this._layouts.length;t++){let i=this.findCacheLayout(e,t);i!==-1&&this._layouts[t].splice(i,1)}}cleanupNode(e){for(let t in e)t[0]==="_"&&t!=="_id"&&delete e[t];return this}}return l._idSeq=0,l})();var D={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"};var m=class{};var k=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),w=class{};function Z(l,r){l.touches.length>1||(l.cancelable&&l.preventDefault(),h.simulateMouseEvent(l.changedTouches[0],r))}function Me(l,r){l.cancelable&&l.preventDefault(),h.simulateMouseEvent(l,r)}function I(l){w.touchHandled||(w.touchHandled=!0,Z(l,"mousedown"))}function G(l){w.touchHandled&&Z(l,"mousemove")}function W(l){if(!w.touchHandled)return;w.pointerLeaveTimeout&&(window.clearTimeout(w.pointerLeaveTimeout),delete w.pointerLeaveTimeout);let r=!!m.dragElement;Z(l,"mouseup"),r||Z(l,"click"),w.touchHandled=!1}function F(l){l.pointerType!=="mouse"&&l.target.releasePointerCapture(l.pointerId)}function be(l){m.dragElement&&l.pointerType!=="mouse"&&Me(l,"mouseenter")}function _e(l){m.dragElement&&l.pointerType!=="mouse"&&(w.pointerLeaveTimeout=window.setTimeout(()=>{delete w.pointerLeaveTimeout,Me(l,"mouseleave")},10))}var Se=(()=>{class l{constructor(e,t,i){this.host=e,this.dir=t,this.option=i,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}_init(){if(this.option.element)try{this.el=this.option.element instanceof HTMLElement?this.option.element:this.host.querySelector(this.option.element)}catch(e){this.option.element=void 0,console.error("Query for resizeable handle failed, falling back",e)}return this.el||(this.el=document.createElement("div"),this.host.appendChild(this.el)),this.el.classList.add("ui-resizable-handle"),this.el.classList.add(`${l.prefix}${this.dir}`),this.el.style.zIndex="100",this.el.style.userSelect="none",this.el.addEventListener("mousedown",this._mouseDown),k&&(this.el.addEventListener("touchstart",I),this.el.addEventListener("pointerdown",F)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),k&&(this.el.removeEventListener("touchstart",I),this.el.removeEventListener("pointerdown",F)),this.option.element||this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(e){this.mouseDownEvent=e,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),k&&(this.el.addEventListener("touchmove",G),this.el.addEventListener("touchend",W)),e.stopPropagation(),e.preventDefault()}_mouseMove(e){let t=this.mouseDownEvent;this.moving?this._triggerEvent("move",e):Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",e),document.addEventListener("keydown",this._keyEvent)),e.stopPropagation()}_mouseUp(e){this.moving&&(this._triggerEvent("stop",e),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),k&&(this.el.removeEventListener("touchmove",G),this.el.removeEventListener("touchend",W)),delete this.moving,delete this.mouseDownEvent,e.stopPropagation(),e.preventDefault()}_keyEvent(e){e.key==="Escape"&&(this.host.gridstackNode?.grid?.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))}_triggerEvent(e,t){return this.option[e]&&this.option[e](t),this}}return l.prefix="ui-resizable-",l})();var M=class{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(r,e){this._eventRegister[r]=e}off(r){delete this._eventRegister[r]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(r,e){if(!this.disabled&&this._eventRegister&&this._eventRegister[r])return this._eventRegister[r](e)}};var Ae=(()=>{class l extends M{constructor(e,t={}){super(),this.el=e,this.option=t,this.rectScale={x:1,y:1},this._ui=()=>{let s=this.el.parentElement.getBoundingClientRect(),n={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},o=this.temporalRect||n;return{position:{left:(o.left-s.left)*this.rectScale.x,top:(o.top-s.top)*this.rectScale.y},size:{width:o.width*this.rectScale.x,height:o.height*this.rectScale.y}}},this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(e){let t=e.handles&&e.handles!==this.option.handles,i=e.autoHide&&e.autoHide!==this.option.autoHide;return Object.keys(e).forEach(s=>this.option[s]=e[s]),t&&(this._removeHandlers(),this._setupHandlers()),i&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(e){return e?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),m.overResizeElement===this&&delete m.overResizeElement),this}_mouseOver(e){m.overResizeElement||m.dragElement||(m.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(e){m.overResizeElement===this&&(delete m.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(e=>e.trim()).map(e=>new Se(this.el,e,{element:this.option.element,start:t=>this._resizeStart(t),stop:t=>this._resizeStop(t),move:t=>this._resizing(t,e)})),this}_resizeStart(e){this.sizeToContent=h.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=h.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=e,this._setupHelper(),this._applyChange();let t=h.initEvent(e,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(t,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",t),this}_resizing(e,t){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(e,t),this._applyChange();let i=h.initEvent(e,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(i,this._ui()),this.triggerEvent("resize",i),this}_resizeStop(e){let t=h.initEvent(e,{type:"resizestop",target:this.el});return this._cleanHelper(),this.option.stop&&this.option.stop(t),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",t),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=l._originStyleProp.map(i=>this.el.style[i]),this.parentOriginStylePosition=this.el.parentElement.style.position;let e=this.el.parentElement,t=h.getValuesFromTransformedElement(e);return this.rectScale={x:t.xScale,y:t.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return l._originStyleProp.forEach((e,t)=>{this.el.style[e]=this.elOriginStyleVal[t]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(e,t){let i=this.startEvent,s={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},n=e.clientX-i.clientX,o=this.sizeToContent?0:e.clientY-i.clientY,a,u;t.indexOf("e")>-1?s.width+=n:t.indexOf("w")>-1&&(s.width-=n,s.left+=n,a=!0),t.indexOf("s")>-1?s.height+=o:t.indexOf("n")>-1&&(s.height-=o,s.top+=o,u=!0);let c=this._constrainSize(s.width,s.height,a,u);return Math.round(s.width)!==Math.round(c.width)&&(t.indexOf("w")>-1&&(s.left+=s.width-c.width),s.width=c.width),Math.round(s.height)!==Math.round(c.height)&&(t.indexOf("n")>-1&&(s.top+=s.height-c.height),s.height=c.height),s}_constrainSize(e,t,i,s){let n=this.option,o=(i?n.maxWidthMoveLeft:n.maxWidth)||Number.MAX_SAFE_INTEGER,a=n.minWidth/this.rectScale.x||e,u=(s?n.maxHeightMoveUp:n.maxHeight)||Number.MAX_SAFE_INTEGER,c=n.minHeight/this.rectScale.y||t,d=Math.min(o,Math.max(a,e)),g=Math.min(u,Math.max(c,t));return{width:d,height:g}}_applyChange(){let e={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){let t=this.el.parentElement,{left:i,top:s}=t.getBoundingClientRect();e={left:i,top:s,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(t=>{let i=this.temporalRect[t],s=t==="width"||t==="left"?this.rectScale.x:t==="height"||t==="top"?this.rectScale.y:1;this.el.style[t]=(i-e[t])*s+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(e=>e.destroy()),delete this.handlers,this}}return l._originStyleProp=["width","height","position","left","top","opacity","zIndex"],l})();var Ge='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle',Oe=(()=>{class l extends M{constructor(e,t={}){super(),this.el=e,this.option=t,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};let i=t?.handle?.substring(1),s=e.gridstackNode;this.dragEls=!i||e.classList.contains(i)?[e]:s?.subGrid?[e.querySelector(t.handle)||e]:Array.from(e.querySelectorAll(t.handle)),this.dragEls.length===0&&(this.dragEls=[e]),this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this.enable()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){this.disabled!==!1&&(super.enable(),this.dragEls.forEach(e=>{e.addEventListener("mousedown",this._mouseDown),k&&(e.addEventListener("touchstart",I),e.addEventListener("pointerdown",F))}),this.el.classList.remove("ui-draggable-disabled"))}disable(e=!1){this.disabled!==!0&&(super.disable(),this.dragEls.forEach(t=>{t.removeEventListener("mousedown",this._mouseDown),k&&(t.removeEventListener("touchstart",I),t.removeEventListener("pointerdown",F))}),e||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(e){return Object.keys(e).forEach(t=>this.option[t]=e[t]),this}_mouseDown(e){if(w.touchHandled&&e.isTrusted&&(w.touchHandled=!1),!m.mouseHandled)return e.button!==0||!this.dragEls.find(t=>t===e.target)&&e.target.closest(Ge)||this.option.cancel&&e.target.closest(this.option.cancel)||(this.mouseDownEvent=e,delete this.dragging,delete m.dragElement,delete m.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),k&&(e.currentTarget.addEventListener("touchmove",G),e.currentTarget.addEventListener("touchend",W)),e.preventDefault(),document.activeElement&&document.activeElement.blur(),m.mouseHandled=!0),!0}_callDrag(e){if(!this.dragging)return;let t=h.initEvent(e,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(t,this.ui()),this.triggerEvent("drag",t)}_mouseMove(e){let t=this.mouseDownEvent;if(this.lastDrag=e,this.dragging)if(this._dragFollow(e),m.pauseDrag){let i=Number.isInteger(m.pauseDrag)?m.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(e),i)}else this._callDrag(e);else if(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>3){this.dragging=!0,m.dragElement=this;let i=this.el.gridstackNode?.grid;i?m.dropElement=i.el.ddElement.ddDroppable:delete m.dropElement,this.helper=this._createHelper(),this._setupHelperContainmentStyle(),this.dragTransform=h.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment),this._setupHelperStyle(e);let s=h.initEvent(e,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(s,this.ui()),this.triggerEvent("dragstart",s),document.addEventListener("keydown",this._keyEvent)}return!0}_mouseUp(e){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),k&&e.currentTarget&&(e.currentTarget.removeEventListener("touchmove",G,!0),e.currentTarget.removeEventListener("touchend",W,!0)),this.dragging){delete this.dragging,delete this.el.gridstackNode?._origRotate,document.removeEventListener("keydown",this._keyEvent),m.dropElement?.el===this.el.parentElement&&delete m.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper!==this.el&&this.helper.remove(),this._removeHelperStyle();let t=h.initEvent(e,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(t),this.triggerEvent("dragstop",t),m.dropElement&&m.dropElement.drop(e)}delete this.helper,delete this.mouseDownEvent,delete m.dragElement,delete m.dropElement,delete m.mouseHandled,e.preventDefault()}_keyEvent(e){let t=this.el.gridstackNode,i=t?.grid||m.dropElement?.el?.gridstack;if(e.key==="Escape")t&&t._origRotate&&(t._orig=t._origRotate,delete t._origRotate),i?.cancelDrag(),this._mouseUp(this.mouseDownEvent);else if(t&&i&&(e.key==="r"||e.key==="R")){if(!h.canBeRotated(t))return;t._origRotate=t._origRotate||f({},t._orig),delete t._moving,i.setAnimation(!1).rotate(t.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),t._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,t.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",h.swap(t._orig,"w","h"),delete t._rect,this._mouseMove(this.lastDrag)}}_createHelper(){let e=this.el;return typeof this.option.helper=="function"?e=this.option.helper(this.el):this.option.helper==="clone"&&(e=h.cloneNode(this.el)),e.parentElement||h.appendTo(e,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),this.dragElementOriginStyle=l.originStyleProp.map(t=>this.el.style[t]),e}_setupHelperStyle(e){this.helper.classList.add("ui-draggable-dragging"),this.el.gridstackNode?.grid?.el.classList.add("grid-stack-dragging");let t=this.helper.style;return t.pointerEvents="none",t.width=this.dragOffset.width+"px",t.height=this.dragOffset.height+"px",t.willChange="left, top",t.position="fixed",this._dragFollow(e),t.transition="none",setTimeout(()=>{this.helper&&(t.transition=null)},0),this}_removeHelperStyle(){if(this.helper.classList.remove("ui-draggable-dragging"),this.el.gridstackNode?.grid?.el.classList.remove("grid-stack-dragging"),!this.helper?.gridstackNode?._isAboutToRemove&&this.dragElementOriginStyle){let t=this.helper,i=this.dragElementOriginStyle.transition||null;t.style.transition=this.dragElementOriginStyle.transition="none",l.originStyleProp.forEach(s=>t.style[s]=this.dragElementOriginStyle[s]||null),setTimeout(()=>t.style.transition=i,50)}return delete this.dragElementOriginStyle,this}_dragFollow(e){let t={left:0,top:0},i=this.helper.style,s=this.dragOffset;i.left=(e.clientX+s.offsetLeft-t.left)*this.dragTransform.xScale+"px",i.top=(e.clientY+s.offsetTop-t.top)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(e,t,i){let s=0,n=0;i&&(s=this.dragTransform.xOffset,n=this.dragTransform.yOffset);let o=t.getBoundingClientRect();return{left:o.left,top:o.top,offsetLeft:-e.clientX+o.left-s,offsetTop:-e.clientY+o.top-n,width:o.width*this.dragTransform.xScale,height:o.height*this.dragTransform.yScale}}ui(){let t=this.el.parentElement.getBoundingClientRect(),i=this.helper.getBoundingClientRect();return{position:{top:(i.top-t.top)*this.dragTransform.yScale,left:(i.left-t.left)*this.dragTransform.xScale}}}}return l.originStyleProp=["width","height","transform","transform-origin","transition","pointerEvents","position","left","top","minWidth","willChange"],l})();var ee=class extends M{constructor(r,e={}){super(),this.el=r,this.option=e,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(r,e){super.on(r,e)}off(r){super.off(r)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),k&&(this.el.addEventListener("pointerenter",be),this.el.addEventListener("pointerleave",_e)))}disable(r=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),r||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),k&&(this.el.removeEventListener("pointerenter",be),this.el.removeEventListener("pointerleave",_e)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(r){return Object.keys(r).forEach(e=>this.option[e]=r[e]),this._setupAccept(),this}_mouseEnter(r){if(!m.dragElement||w.touchHandled&&r.isTrusted||!this._canDrop(m.dragElement.el))return;r.preventDefault(),r.stopPropagation(),m.dropElement&&m.dropElement!==this&&m.dropElement._mouseLeave(r,!0),m.dropElement=this;let e=h.initEvent(r,{target:this.el,type:"dropover"});this.option.over&&this.option.over(e,this._ui(m.dragElement)),this.triggerEvent("dropover",e),this.el.classList.add("ui-droppable-over")}_mouseLeave(r,e=!1){if(!m.dragElement||m.dropElement!==this)return;r.preventDefault(),r.stopPropagation();let t=h.initEvent(r,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(t,this._ui(m.dragElement)),this.triggerEvent("dropout",t),m.dropElement===this&&(delete m.dropElement,!e)){let i,s=this.el.parentElement;for(;!i&&s;)i=s.ddElement?.ddDroppable,s=s.parentElement;i&&i._mouseEnter(r)}}drop(r){r.preventDefault();let e=h.initEvent(r,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(e,this._ui(m.dragElement)),this.triggerEvent("drop",e)}_canDrop(r){return r&&(!this.accept||this.accept(r))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=r=>r.classList.contains(this.option.accept)||r.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(r){return f({draggable:r.el},r.ui())}};var te=class l{static init(r){return r.ddElement||(r.ddElement=new l(r)),r.ddElement}constructor(r){this.el=r}on(r,e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.on(r,e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.on(r,e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.on(r,e),this}off(r){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(r)>-1?this.ddDraggable.off(r):this.ddDroppable&&["drop","dropover","dropout"].indexOf(r)>-1?this.ddDroppable.off(r):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(r)>-1&&this.ddResizable.off(r),this}setupDraggable(r){return this.ddDraggable?this.ddDraggable.updateOption(r):this.ddDraggable=new Oe(this.el,r),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(r){return this.ddResizable?this.ddResizable.updateOption(r):this.ddResizable=new Ae(this.el,r),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(r){return this.ddDroppable?this.ddDroppable.updateOption(r):this.ddDroppable=new ee(this.el,r),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}};var ie=class{resizable(r,e,t,i){return this._getDDElements(r,e).forEach(s=>{if(e==="disable"||e==="enable")s.ddResizable&&s.ddResizable[e]();else if(e==="destroy")s.ddResizable&&s.cleanResizable();else if(e==="option")s.setupResizable({[t]:i});else{let o=s.el.gridstackNode.grid,a=s.el.getAttribute("gs-resize-handles")||o.opts.resizable.handles||"e,s,se";a==="all"&&(a="n,e,s,w,se,sw,ne,nw");let u=!o.opts.alwaysShowResizeHandle;s.setupResizable(v(f({},o.opts.resizable),{handles:a,autoHide:u,start:e.start,stop:e.stop,resize:e.resize}))}}),this}draggable(r,e,t,i){return this._getDDElements(r,e).forEach(s=>{if(e==="disable"||e==="enable")s.ddDraggable&&s.ddDraggable[e]();else if(e==="destroy")s.ddDraggable&&s.cleanDraggable();else if(e==="option")s.setupDraggable({[t]:i});else{let n=s.el.gridstackNode.grid;s.setupDraggable(v(f({},n.opts.draggable),{start:e.start,stop:e.stop,drag:e.drag}))}}),this}dragIn(r,e){return this._getDDElements(r).forEach(t=>t.setupDraggable(e)),this}droppable(r,e,t,i){return typeof e.accept=="function"&&!e._accept&&(e._accept=e.accept,e.accept=s=>e._accept(s)),this._getDDElements(r,e).forEach(s=>{e==="disable"||e==="enable"?s.ddDroppable&&s.ddDroppable[e]():e==="destroy"?s.ddDroppable&&s.cleanDroppable():e==="option"?s.setupDroppable({[t]:i}):s.setupDroppable(e)}),this}isDroppable(r){return!!(r?.ddElement?.ddDroppable&&!r.ddElement.ddDroppable.disabled)}isDraggable(r){return!!(r?.ddElement?.ddDraggable&&!r.ddElement.ddDraggable.disabled)}isResizable(r){return!!(r?.ddElement?.ddResizable&&!r.ddElement.ddResizable.disabled)}on(r,e,t){return this._getDDElements(r).forEach(i=>i.on(e,s=>{t(s,m.dragElement?m.dragElement.el:s.target,m.dragElement?m.dragElement.helper:null)})),this}off(r,e){return this._getDDElements(r).forEach(t=>t.off(e)),this}_getDDElements(r,e){let t=r.gridstack||e!=="destroy"&&e!=="disable",i=h.getElements(r);return i.length?i.map(n=>n.ddElement||(t?te.init(n):null)).filter(n=>n):[]}};var z=new ie,S=(()=>{class l{static init(e={},t=".grid-stack"){if(typeof document>"u")return null;let i=l.getGridElement(t);return i?(i.gridstack||(i.gridstack=new l(i,h.cloneDeep(e))),i.gridstack):(console.error(typeof t=="string"?'GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(e={},t=".grid-stack"){let i=[];return typeof document>"u"||(l.getGridElements(t).forEach(s=>{s.gridstack||(s.gridstack=new l(s,h.cloneDeep(e))),i.push(s.gridstack)}),i.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),i}static addGrid(e,t={}){if(!e)return null;let i=e;if(i.gridstack){let o=i.gridstack;return t&&(o.opts=f(f({},o.opts),t)),t.children!==void 0&&o.load(t.children),o}return(!e.classList.contains("grid-stack")||l.addRemoveCB)&&(l.addRemoveCB?i=l.addRemoveCB(e,t,!0,!0):i=h.createDiv(["grid-stack",t.class],e)),l.init(t,i)}static registerEngine(e){l.engineClass=e}get placeholder(){if(!this._placeholder){this._placeholder=h.createDiv([this.opts.placeholderClass,D.itemClass,this.opts.itemClass]);let e=h.createDiv(["placeholder-content"],this._placeholder);this.opts.placeholderText&&(e.textContent=this.opts.placeholderText)}return this._placeholder}constructor(e,t={}){this.el=e,this.opts=t,this.animationDelay=310,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},e.gridstack=this,this.opts=t=t||{},e.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),t.row&&(t.minRow=t.maxRow=t.row,delete t.row);let i=h.toNumber(e.getAttribute("gs-row"));t.column==="auto"&&delete t.column,t.alwaysShowResizeHandle!==void 0&&(t._alwaysShowResizeHandle=t.alwaysShowResizeHandle);let s=t.columnOpts;if(s){let c=s.breakpoints;!s.columnWidth&&!c?.length?delete t.columnOpts:(s.columnMax=s.columnMax||12,c?.length>1&&c.sort((d,g)=>(g.w||0)-(d.w||0)))}let n=v(f({},h.cloneDeep(D)),{column:h.toNumber(e.getAttribute("gs-column"))||D.column,minRow:i||h.toNumber(e.getAttribute("gs-min-row"))||D.minRow,maxRow:i||h.toNumber(e.getAttribute("gs-max-row"))||D.maxRow,staticGrid:h.toBool(e.getAttribute("gs-static"))||D.staticGrid,sizeToContent:h.toBool(e.getAttribute("gs-size-to-content"))||void 0,draggable:{handle:(t.handleClass?"."+t.handleClass:t.handle?t.handle:"")||D.draggable.handle},removableOptions:{accept:t.itemClass||D.removableOptions.accept,decline:D.removableOptions.decline}});e.getAttribute("gs-animate")&&(n.animate=h.toBool(e.getAttribute("gs-animate"))),t=h.defaults(t,n),this._initMargin(),this.checkDynamicColumn(),this._updateColumnVar(t),t.rtl==="auto"&&(t.rtl=e.style.direction==="rtl"),t.rtl&&this.el.classList.add("grid-stack-rtl");let a=this.el.closest("."+D.itemClass)?.gridstackNode;if(a&&(a.subGrid=this,this.parentGridNode=a,this.el.classList.add("grid-stack-nested"),a.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=t.cellHeight==="auto",this._isAutoCellHeight||t.cellHeight==="initial")this.cellHeight(void 0);else{typeof t.cellHeight=="number"&&t.cellHeightUnit&&t.cellHeightUnit!==D.cellHeightUnit&&(t.cellHeight=t.cellHeight+t.cellHeightUnit,delete t.cellHeightUnit);let c=t.cellHeight;delete t.cellHeight,this.cellHeight(c)}t.alwaysShowResizeHandle==="mobile"&&(t.alwaysShowResizeHandle=k),this._setStaticClass();let u=t.engineClass||l.engineClass||ye;if(this.engine=new u({column:this.getColumn(),float:t.float,maxRow:t.maxRow,onChange:c=>{c.forEach(d=>{let g=d.el;g&&(d._removeDOM?(g&&g.remove(),delete d._removeDOM):this._writePosAttr(g,d))}),this._updateContainerHeight()}}),t.auto&&(this.batchUpdate(),this.engine._loading=!0,this.getGridItems().forEach(c=>this._prepareElement(c)),delete this.engine._loading,this.batchUpdate(!1)),t.children){let c=t.children;delete t.children,c.length&&this.load(c)}this.setAnimation(),t.subGridDynamic&&!m.pauseDrag&&(m.pauseDrag=!0),t.draggable?.pause!==void 0&&(m.pauseDrag=t.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}_updateColumnVar(e=this.opts){this.el.classList.add("gs-"+e.column),typeof e.column=="number"&&this.el.style.setProperty("--gs-column-width",`${100/e.column}%`)}addWidget(e){if(!e)return;if(typeof e=="string"){console.error("V11: GridStack.addWidget() does not support string anymore. see #2736");return}if(e.ELEMENT_NODE)return console.error("V11: GridStack.addWidget() does not support HTMLElement anymore. use makeWidget()"),this.makeWidget(e);let t,i=e;if(i.grid=this,i.el?t=i.el:l.addRemoveCB?t=l.addRemoveCB(this.el,e,!0,!1):t=this.createWidgetDivs(i),!t)return;if(i=t.gridstackNode,i&&t.parentElement===this.el&&this.engine.nodes.find(n=>n._id===i._id))return t;let s=this._readAttr(t);return h.defaults(e,s),this.engine.prepareNode(e),this.el.appendChild(t),this.makeWidget(t,e),t}createWidgetDivs(e){let t=h.createDiv(["grid-stack-item",this.opts.itemClass]),i=h.createDiv(["grid-stack-item-content"],t);return h.lazyLoad(e)?e.visibleObservable||(e.visibleObservable=new IntersectionObserver(([s])=>{s.isIntersecting&&(e.visibleObservable?.disconnect(),delete e.visibleObservable,l.renderCB(i,e),e.grid?.prepareDragDrop(e.el))}),window.setTimeout(()=>e.visibleObservable?.observe(t))):l.renderCB(i,e),t}makeSubGrid(e,t,i,s=!0){let n=e.gridstackNode;if(n||(n=this.makeWidget(e).gridstackNode),n.subGrid?.el)return n.subGrid;let o,a=this;for(;a&&!o;)o=a.opts?.subGridOpts,a=a.parentGridNode?.grid;t=h.cloneDeep(f(f(v(f({},this.opts),{id:void 0,children:void 0,column:"auto",columnOpts:void 0,layout:"list",subGridOpts:void 0}),o||{}),t||n.subGridOpts||{})),n.subGridOpts=t;let u;t.column==="auto"&&(u=!0,t.column=Math.max(n.w||1,i?.w||1),delete t.columnOpts);let c=n.el.querySelector(".grid-stack-item-content"),d,g;if(s&&(this._removeDD(n.el),g=v(f({},n),{x:0,y:0}),h.removeInternalForSave(g),delete g.subGridOpts,n.content&&(g.content=n.content,delete n.content),l.addRemoveCB?d=l.addRemoveCB(this.el,g,!0,!1):(d=h.createDiv(["grid-stack-item"]),d.appendChild(c),c=h.createDiv(["grid-stack-item-content"],n.el)),this.prepareDragDrop(n.el)),i){let E=u?t.column:n.w,R=n.h+i.h,N=n.el.style;N.transition="none",this.update(n.el,{w:E,h:R}),setTimeout(()=>N.transition=null)}let p=n.subGrid=l.addGrid(c,t);return i?._moving&&(p._isTemp=!0),u&&(p._autoColumn=!0),s&&p.makeWidget(d,g),i&&(i._moving?window.setTimeout(()=>h.simulateMouseEvent(i._event,"mouseenter",p.el),0):p.makeWidget(n.el,n)),this.resizeToContentCheck(!1,n),p}removeAsSubGrid(e){let t=this.parentGridNode?.grid;t&&(t.batchUpdate(),t.removeWidget(this.parentGridNode.el,!0,!0),this.engine.nodes.forEach(i=>{i.x+=this.parentGridNode.x,i.y+=this.parentGridNode.y,t.makeWidget(i.el,i)}),t.batchUpdate(!1),this.parentGridNode&&delete this.parentGridNode.subGrid,delete this.parentGridNode,e&&window.setTimeout(()=>h.simulateMouseEvent(e._event,"mouseenter",t.el),0))}save(e=!0,t=!1,i=l.saveCB,s){let n=this.engine.save(e,i,s);if(n.forEach(o=>{if(e&&o.el&&!o.subGrid&&!i){let a=o.el.querySelector(".grid-stack-item-content");o.content=a?.innerHTML,o.content||delete o.content}else if(!e&&!i&&delete o.content,o.subGrid?.el){let a=o.w||o.subGrid.getColumn(),u=o.subGrid.save(e,t,i,a);o.subGridOpts=t?u:{children:u},delete o.subGrid}delete o.el}),t){let o=h.cloneDeep(this.opts);o.marginBottom===o.marginTop&&o.marginRight===o.marginLeft&&o.marginTop===o.marginRight&&(o.margin=o.marginTop,delete o.marginTop,delete o.marginRight,delete o.marginBottom,delete o.marginLeft),o.rtl===(this.el.style.direction==="rtl")&&(o.rtl="auto"),this._isAutoCellHeight&&(o.cellHeight="auto"),this._autoColumn&&(o.column="auto");let a=o._alwaysShowResizeHandle;return delete o._alwaysShowResizeHandle,a!==void 0?o.alwaysShowResizeHandle=a:delete o.alwaysShowResizeHandle,h.removeInternalAndSame(o,D),o.children=n,o}return n}load(e,t=l.addRemoveCB||!0){e=h.cloneDeep(e);let i=this.getColumn();e.forEach(d=>{d.w=d.w||d.minW||1,d.h=d.h||d.minH||1}),e=h.sort(e),this.engine.skipCacheUpdate=this._ignoreLayoutsNodeChange=!0;let s=0;e.forEach(d=>{s=Math.max(s,(d.x||0)+d.w)}),s>this.engine.defaultColumn&&(this.engine.defaultColumn=s),s>i&&(this.engine.nodes.length===0&&this.responseLayout?(this.engine.nodes=e,this.engine.columnChanged(s,i,this.responseLayout),e=this.engine.nodes,this.engine.nodes=[],delete this.responseLayout):this.engine.cacheLayout(e,s,!0));let n=l.addRemoveCB;typeof t=="function"&&(l.addRemoveCB=t);let o=[];this.batchUpdate();let a=!this.engine.nodes.length,u=a&&this.opts.animate;u&&this.setAnimation(!1),!a&&t&&[...this.engine.nodes].forEach(g=>{if(!g.id)return;h.find(e,g.id)||(l.addRemoveCB&&l.addRemoveCB(this.el,g,!1,!1),o.push(g),this.removeWidget(g.el,!0,!1))}),this.engine._loading=!0;let c=[];return this.engine.nodes=this.engine.nodes.filter(d=>h.find(e,d.id)?(c.push(d),!1):!0),e.forEach(d=>{let g=h.find(c,d.id);if(g){if(h.shouldSizeToContent(g)&&(d.h=g.h),this.engine.nodeBoundFix(d),(d.autoPosition||d.x===void 0||d.y===void 0)&&(d.w=d.w||g.w,d.h=d.h||g.h,this.engine.findEmptyPosition(d)),this.engine.nodes.push(g),h.samePos(g,d)&&this.engine.nodes.length>1&&(this.moveNode(g,v(f({},d),{forceCollide:!0})),h.copyPos(d,g)),this.update(g.el,d),d.subGridOpts?.children){let p=g.el.querySelector(".grid-stack");p&&p.gridstack&&p.gridstack.load(d.subGridOpts.children)}}else t&&this.addWidget(d)}),delete this.engine._loading,this.engine.removedNodes=o,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this.engine.skipCacheUpdate,n?l.addRemoveCB=n:delete l.addRemoveCB,u&&this.setAnimation(!0,!0),this}batchUpdate(e=!0){return this.engine.batchUpdate(e),e||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(e=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!e||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;let t=this.el.querySelector("."+this.opts.itemClass);if(t){let s=h.toNumber(t.getAttribute("gs-h"))||1;return Math.round(t.offsetHeight/s)}let i=parseInt(this.el.getAttribute("gs-current-row"));return i?Math.round(this.el.getBoundingClientRect().height/i):this.opts.cellHeight}cellHeight(e){if(e!==void 0&&this._isAutoCellHeight!==(e==="auto")&&(this._isAutoCellHeight=e==="auto",this._updateResizeEvent()),(e==="initial"||e==="auto")&&(e=void 0),e===void 0){let i=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;e=this.cellWidth()+i}let t=h.parseHeight(e);return this.opts.cellHeightUnit===t.unit&&this.opts.cellHeight===t.h?this:(this.opts.cellHeightUnit=t.unit,this.opts.cellHeight=t.h,this.el.style.setProperty("--gs-cell-height",`${this.opts.cellHeight}${this.opts.cellHeightUnit}`),this._updateContainerHeight(),this.resizeToContentCheck(),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(e=!1){return e&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){let e=this.opts.columnOpts;if(!e||!e.columnWidth&&!e.breakpoints?.length)return!1;let t=this.getColumn(),i=t,s=this._widthOrContainer(!0);if(e.columnWidth)i=Math.min(Math.round(s/e.columnWidth)||1,e.columnMax);else{i=e.columnMax;let n=0;for(;n<e.breakpoints.length&&s<=e.breakpoints[n].w;)i=e.breakpoints[n++].c||t}if(i!==t){let n=e.breakpoints?.find(o=>o.c===i);return this.column(i,n?.layout||e.layout),!0}return!1}compact(e="compact",t=!0){return this.engine.compact(e,t),this._triggerChangeEvent(),this}column(e,t="moveScale"){if(!e||e<1||this.opts.column===e)return this;let i=this.getColumn();return this.opts.column=e,this.engine?(this.engine.column=e,this.el.classList.remove("gs-"+i),this._updateColumnVar(),this.engine.columnChanged(i,e,t),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):(this.responseLayout=t,this)}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(e=>e.matches("."+this.opts.itemClass)&&!e.matches("."+this.opts.placeholderClass))}isIgnoreChangeCB(){return this._ignoreLayoutsNodeChange}destroy(e=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),e?this.el.parentNode.removeChild(this.el):(this.removeAll(e),this.el.removeAttribute("gs-current-row")),this.parentGridNode&&delete this.parentGridNode.subGrid,delete this.parentGridNode,delete this.opts,delete this._placeholder?.gridstackNode,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(e){return this.opts.float!==e&&(this.opts.float=this.engine.float=e,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(e,t=!1){let i=this.el.getBoundingClientRect(),s;t?s={top:i.top+document.documentElement.scrollTop,left:i.left}:s={top:this.el.offsetTop,left:this.el.offsetLeft};let n=e.left-s.left,o=e.top-s.top,a=i.width/this.getColumn(),u=i.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(n/a),y:Math.floor(o/u)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow||0)}isAreaEmpty(e,t,i,s){return this.engine.isAreaEmpty(e,t,i,s)}makeWidget(e,t){let i=l.getElement(e);if(!i||i.gridstackNode)return i;i.parentElement||this.el.appendChild(i),this._prepareElement(i,!0,t);let s=i.gridstackNode;this._updateContainerHeight(),s.subGridOpts&&this.makeSubGrid(i,s.subGridOpts,void 0,!1);let n;return this.opts.column===1&&!this._ignoreLayoutsNodeChange&&(n=this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),n&&delete this._ignoreLayoutsNodeChange,i}on(e,t){return e.indexOf(" ")!==-1?(e.split(" ").forEach(s=>this.on(s,t)),this):(e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable"?(e==="enable"||e==="disable"?this._gsEventHandler[e]=s=>t(s):this._gsEventHandler[e]=s=>{s.detail&&t(s,s.detail)},this.el.addEventListener(e,this._gsEventHandler[e])):e==="drag"||e==="dragstart"||e==="dragstop"||e==="resizestart"||e==="resize"||e==="resizestop"||e==="dropped"||e==="resizecontent"?this._gsEventHandler[e]=t:console.error("GridStack.on("+e+") event not supported"),this)}off(e){return e.indexOf(" ")!==-1?(e.split(" ").forEach(i=>this.off(i)),this):((e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable")&&this._gsEventHandler[e]&&this.el.removeEventListener(e,this._gsEventHandler[e]),delete this._gsEventHandler[e],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(e=>this.off(e)),this}removeWidget(e,t=!0,i=!0){return e?(l.getElements(e).forEach(s=>{if(s.parentElement&&s.parentElement!==this.el)return;let n=s.gridstackNode;n||(n=this.engine.nodes.find(o=>s===o.el)),n&&(t&&l.addRemoveCB&&l.addRemoveCB(this.el,n,!1,!1),delete s.gridstackNode,this._removeDD(s),this.engine.removeNode(n,t,i),t&&s.parentElement&&s.remove())}),i&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this):(console.error("Error: GridStack.removeWidget(undefined) called"),this)}removeAll(e=!0,t=!0){return this.engine.nodes.forEach(i=>{e&&l.addRemoveCB&&l.addRemoveCB(this.el,i,!1,!1),delete i.el.gridstackNode,this.opts.staticGrid||this._removeDD(i.el)}),this.engine.removeAll(e,t),t&&this._triggerRemoveEvent(),this}setAnimation(e=this.opts.animate,t){return t?setTimeout(()=>{this.opts&&this.setAnimation(e)}):e?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this.opts.animate=e,this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(e,t=!0,i=!0){return!!this.opts.staticGrid===e?this:(e?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(s=>{this.prepareDragDrop(s.el),s.subGrid&&i&&s.subGrid.setStatic(e,t,i)}),t&&this._setStaticClass(),this)}updateOptions(e){let t=this.opts;return e===t?this:(e.acceptWidgets!==void 0&&(t.acceptWidgets=e.acceptWidgets,this._setupAcceptWidget()),e.animate!==void 0&&this.setAnimation(e.animate),e.cellHeight&&this.cellHeight(e.cellHeight),e.class!==void 0&&e.class!==t.class&&(t.class&&this.el.classList.remove(t.class),e.class&&this.el.classList.add(e.class)),e.columnOpts?(this.opts.columnOpts=e.columnOpts,this.checkDynamicColumn()):e.columnOpts===null&&this.opts.columnOpts?(delete this.opts.columnOpts,this._updateResizeEvent()):typeof e.column=="number"&&this.column(e.column),e.margin!==void 0&&this.margin(e.margin),e.staticGrid!==void 0&&this.setStatic(e.staticGrid),e.disableDrag!==void 0&&!e.staticGrid&&this.enableMove(!e.disableDrag),e.disableResize!==void 0&&!e.staticGrid&&this.enableResize(!e.disableResize),e.float!==void 0&&this.float(e.float),e.row!==void 0?(t.minRow=t.maxRow=t.row=e.row,this._updateContainerHeight()):(e.minRow!==void 0&&(t.minRow=e.minRow,this._updateContainerHeight()),e.maxRow!==void 0&&(t.maxRow=e.maxRow)),e.lazyLoad!==void 0&&(t.lazyLoad=e.lazyLoad),e.children?.length&&this.load(e.children),this)}update(e,t){return l.getElements(e).forEach(i=>{let s=i?.gridstackNode;if(!s)return;let n=f(f({},h.copyPos({},s)),h.cloneDeep(t));this.engine.nodeBoundFix(n),delete n.autoPosition;let o=["x","y","w","h"],a;if(o.some(d=>n[d]!==void 0&&n[d]!==s[d])&&(a={},o.forEach(d=>{a[d]=n[d]!==void 0?n[d]:s[d],delete n[d]})),!a&&(n.minW||n.minH||n.maxW||n.maxH)&&(a={}),n.content!==void 0){let d=i.querySelector(".grid-stack-item-content");d&&d.textContent!==n.content&&(s.content=n.content,l.renderCB(d,n),s.subGrid?.el&&(d.appendChild(s.subGrid.el),s.subGrid._updateContainerHeight())),delete n.content}let u=!1,c=!1;for(let d in n)d[0]!=="_"&&s[d]!==n[d]&&(s[d]=n[d],u=!0,c=c||!this.opts.staticGrid&&(d==="noResize"||d==="noMove"||d==="locked"));if(h.sanitizeMinMax(s),a){let d=a.w!==void 0&&a.w!==s.w;this.moveNode(s,a),d&&s.subGrid?s.subGrid.onResize(this.hasAnimationCSS()?s.w:void 0):this.resizeToContentCheck(d,s),delete s._orig}(a||u)&&this._writeAttr(i,s),c&&this.prepareDragDrop(s.el),l.updateCB&&l.updateCB(s)}),this}moveNode(e,t){let i=e._updating;i||this.engine.cleanNodes().beginUpdate(e),this.engine.moveNode(e,t),this._updateContainerHeight(),i||(this._triggerChangeEvent(),this.engine.endUpdate())}resizeToContent(e){if(!e||(e.classList.remove("size-to-content-max"),!e.clientHeight))return;let t=e.gridstackNode;if(!t)return;let i=t.grid;if(!i||e.parentElement!==i.el)return;let s=i.getCellHeight(!0);if(!s)return;let n=t.h?t.h*s:e.clientHeight,o;if(t.resizeToContentParent&&(o=e.querySelector(t.resizeToContentParent)),o||(o=e.querySelector(l.resizeToContentParent)),!o)return;let a=e.clientHeight-o.clientHeight,u=t.h?t.h*s-a:o.clientHeight,c;if(t.subGrid){c=t.subGrid.getRow()*t.subGrid.getCellHeight(!0);let p=t.subGrid.el.getBoundingClientRect(),E=e.getBoundingClientRect();c+=p.top-E.top}else{if(t.subGridOpts?.children?.length)return;{let p=o.firstElementChild;if(!p){console.error(`Error: GridStack.resizeToContent() widget id:${t.id} '${l.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);return}c=p.getBoundingClientRect().height||u}}if(u===c)return;n+=c-u;let d=Math.ceil(n/s),g=Number.isInteger(t.sizeToContent)?t.sizeToContent:0;g&&d>g&&(d=g,e.classList.add("size-to-content-max")),t.minH&&d<t.minH?d=t.minH:t.maxH&&d>t.maxH&&(d=t.maxH),d!==t.h&&(i._ignoreLayoutsNodeChange=!0,i.moveNode(t,{h:d}),delete i._ignoreLayoutsNodeChange)}resizeToContentCBCheck(e){l.resizeToContentCB?l.resizeToContentCB(e):this.resizeToContent(e)}rotate(e,t){return l.getElements(e).forEach(i=>{let s=i.gridstackNode;if(!h.canBeRotated(s))return;let n={w:s.h,h:s.w,minH:s.minW,minW:s.minH,maxH:s.maxW,maxW:s.maxH};if(t){let a=t.left>0?Math.floor(t.left/this.cellWidth()):0,u=t.top>0?Math.floor(t.top/this.opts.cellHeight):0;n.x=s.x+a-(s.h-(u+1)),n.y=s.y+u-a}Object.keys(n).forEach(a=>{n[a]===void 0&&delete n[a]});let o=s._orig;this.update(i,n),s._orig=o}),this}margin(e){if(!(typeof e=="string"&&e.split(" ").length>1)){let i=h.parseHeight(e);if(this.opts.marginUnit===i.unit&&this.opts.margin===i.h)return}return this.opts.margin=e,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this}getMargin(){return this.opts.margin}willItFit(e){return this.engine.willItFit(e)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let e=this.engine.getDirtyNodes(!0);return e&&e.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(e),this._triggerEvent("change",e)),this.engine.saveInitial(),this}_triggerAddEvent(){if(this.engine.batchMode)return this;if(this.engine.addedNodes?.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(t=>{delete t._dirty});let e=[...this.engine.addedNodes];this.engine.addedNodes=[],this._triggerEvent("added",e)}return this}_triggerRemoveEvent(){if(this.engine.batchMode)return this;if(this.engine.removedNodes?.length){let e=[...this.engine.removedNodes];this.engine.removedNodes=[],this._triggerEvent("removed",e)}return this}_triggerEvent(e,t){let i=t?new CustomEvent(e,{bubbles:!1,detail:t}):new Event(e),s=this;for(;s.parentGridNode;)s=s.parentGridNode.grid;return s.el.dispatchEvent(i),this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let e=this.parentGridNode,t=this.getRow()+this._extraDragRow,i=this.opts.cellHeight,s=this.opts.cellHeightUnit;if(!i)return this;if(!e&&!this.opts.minRow){let n=h.parseHeight(getComputedStyle(this.el).minHeight);if(n.h>0&&n.unit===s){let o=Math.floor(n.h/i);t<o&&(t=o)}}return this.el.setAttribute("gs-current-row",String(t)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),t&&(this.el.style[e?"minHeight":"height"]=t*i+s),e&&h.shouldSizeToContent(e)&&e.grid.resizeToContentCBCheck(e.el),this}_prepareElement(e,t=!1,i){i=i||this._readAttr(e),e.gridstackNode=i,i.el=e,i.grid=this,i=this.engine.addNode(i,t),this._writeAttr(e,i),e.classList.add(D.itemClass,this.opts.itemClass);let s=h.shouldSizeToContent(i);return s?e.classList.add("size-to-content"):e.classList.remove("size-to-content"),s&&this.resizeToContentCheck(!1,i),h.lazyLoad(i)||this.prepareDragDrop(i.el),this}_writePosAttr(e,t){return(!t._moving&&!t._resizing||this._placeholder===e)&&(e.style.top=t.y?t.y===1?"var(--gs-cell-height)":`calc(${t.y} * var(--gs-cell-height))`:null,e.style.left=t.x?t.x===1?"var(--gs-column-width)":`calc(${t.x} * var(--gs-column-width))`:null,e.style.width=t.w>1?`calc(${t.w} * var(--gs-column-width))`:null,e.style.height=t.h>1?`calc(${t.h} * var(--gs-cell-height))`:null),e.setAttribute("gs-x",String(t.x)),e.setAttribute("gs-y",String(t.y)),t.w>1?e.setAttribute("gs-w",String(t.w)):e.removeAttribute("gs-w"),t.h>1?e.setAttribute("gs-h",String(t.h)):e.removeAttribute("gs-h"),this}_writeAttr(e,t){if(!t)return this;this._writePosAttr(e,t);let i={noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id",sizeToContent:"gs-size-to-content"};for(let s in i)t[s]?e.setAttribute(i[s],String(t[s])):e.removeAttribute(i[s]);return this}_readAttr(e,t=!0){let i={};i.x=h.toNumber(e.getAttribute("gs-x")),i.y=h.toNumber(e.getAttribute("gs-y")),i.w=h.toNumber(e.getAttribute("gs-w")),i.h=h.toNumber(e.getAttribute("gs-h")),i.autoPosition=h.toBool(e.getAttribute("gs-auto-position")),i.noResize=h.toBool(e.getAttribute("gs-no-resize")),i.noMove=h.toBool(e.getAttribute("gs-no-move")),i.locked=h.toBool(e.getAttribute("gs-locked"));let s=e.getAttribute("gs-size-to-content");s&&(s==="true"||s==="false"?i.sizeToContent=h.toBool(s):i.sizeToContent=parseInt(s,10)),i.id=e.getAttribute("gs-id"),i.maxW=h.toNumber(e.getAttribute("gs-max-w")),i.minW=h.toNumber(e.getAttribute("gs-min-w")),i.maxH=h.toNumber(e.getAttribute("gs-max-h")),i.minH=h.toNumber(e.getAttribute("gs-min-h")),t&&(i.w===1&&e.removeAttribute("gs-w"),i.h===1&&e.removeAttribute("gs-h"),i.maxW&&e.removeAttribute("gs-max-w"),i.minW&&e.removeAttribute("gs-min-w"),i.maxH&&e.removeAttribute("gs-max-h"),i.minH&&e.removeAttribute("gs-min-h"));for(let n in i){if(!i.hasOwnProperty(n))return;!i[n]&&i[n]!==0&&n!=="sizeToContent"&&delete i[n]}return i}_setStaticClass(){let e=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...e),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...e),this.el.removeAttribute("gs-static")),this}onResize(e=this.el?.clientWidth){if(!e||this.prevWidth===e)return;this.prevWidth=e,this.batchUpdate();let t=!1;return this._autoColumn&&this.parentGridNode?this.opts.column!==this.parentGridNode.w&&(this.column(this.parentGridNode.w,this.opts.layout||"list"),t=!0):t=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(i=>{i.subGrid&&i.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(t),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(e=!1,t=void 0){if(this.engine){if(e&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,t),this.animationDelay);if(t)h.shouldSizeToContent(t)&&this.resizeToContentCBCheck(t.el);else if(this.engine.nodes.some(i=>h.shouldSizeToContent(i))){let i=[...this.engine.nodes];this.batchUpdate(),i.forEach(s=>{h.shouldSizeToContent(s)&&this.resizeToContentCBCheck(s.el)}),this._ignoreLayoutsNodeChange=!0,this.batchUpdate(!1),this._ignoreLayoutsNodeChange=!1}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,t?[t]:this.engine.nodes)}}_updateResizeEvent(e=!1){let t=!this.parentGridNode&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(i=>i.sizeToContent));return!e&&t&&!this.resizeObserver?(this._sizeThrottle=h.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0):(e||!t)&&this.resizeObserver&&(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle),this}static getElement(e=".grid-stack-item"){return h.getElement(e)}static getElements(e=".grid-stack-item"){return h.getElements(e)}static getGridElement(e){return l.getElement(e)}static getGridElements(e){return h.getElements(e)}_initMargin(){let e,t=0,i=[];typeof this.opts.margin=="string"&&(i=this.opts.margin.split(" ")),i.length===2?(this.opts.marginTop=this.opts.marginBottom=i[0],this.opts.marginLeft=this.opts.marginRight=i[1]):i.length===4?(this.opts.marginTop=i[0],this.opts.marginRight=i[1],this.opts.marginBottom=i[2],this.opts.marginLeft=i[3]):(e=h.parseHeight(this.opts.margin),this.opts.marginUnit=e.unit,t=this.opts.margin=e.h),["marginTop","marginRight","marginBottom","marginLeft"].forEach(o=>{this.opts[o]===void 0?this.opts[o]=t:(e=h.parseHeight(this.opts[o]),this.opts[o]=e.h,delete this.opts.margin)}),this.opts.marginUnit=e.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop);let n=this.el.style;return n.setProperty("--gs-item-margin-top",`${this.opts.marginTop}${this.opts.marginUnit}`),n.setProperty("--gs-item-margin-bottom",`${this.opts.marginBottom}${this.opts.marginUnit}`),n.setProperty("--gs-item-margin-right",`${this.opts.marginRight}${this.opts.marginUnit}`),n.setProperty("--gs-item-margin-left",`${this.opts.marginLeft}${this.opts.marginUnit}`),this}static getDD(){return z}static setupDragIn(e,t,i,s=document){t?.pause!==void 0&&(m.pauseDrag=t.pause),t=f({appendTo:"body",helper:"clone"},t||{}),(typeof e=="string"?h.getElements(e,s):e).forEach((o,a)=>{z.isDraggable(o)||z.dragIn(o,t),i?.[a]&&(o.gridstackNode=i[a])})}movable(e,t){return this.opts.staticGrid?this:(l.getElements(e).forEach(i=>{let s=i.gridstackNode;s&&(t?delete s.noMove:s.noMove=!0,this.prepareDragDrop(s.el))}),this)}resizable(e,t){return this.opts.staticGrid?this:(l.getElements(e).forEach(i=>{let s=i.gridstackNode;s&&(t?delete s.noResize:s.noResize=!0,this.prepareDragDrop(s.el))}),this)}disable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!1,e),this.enableResize(!1,e),this._triggerEvent("disable"),this}enable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!0,e),this.enableResize(!0,e),this._triggerEvent("enable"),this}enableMove(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el),i.subGrid&&t&&i.subGrid.enableMove(e,t)}),this)}enableResize(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el),i.subGrid&&t&&i.subGrid.enableResize(e,t)}),this)}cancelDrag(){let e=this._placeholder?.gridstackNode;e&&(e._isExternal?(e._isAboutToRemove=!0,this.engine.removeNode(e)):e._isAboutToRemove&&l._itemRemoving(e.el,!1),this.engine.restoreInitial())}_removeDD(e){return z.draggable(e,"destroy").resizable(e,"destroy"),e.gridstackNode&&delete e.gridstackNode._initDD,delete e.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return z.droppable(this.el,"destroy"),this;let e,t,i=(s,n,o)=>{o=o||n;let a=o.gridstackNode;if(!a)return;if(!a.grid?.el){o.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;let p=o.getBoundingClientRect();o.style.left=p.x+(this.dragTransform.xScale-1)*(s.clientX-p.x)/this.dragTransform.xScale+"px",o.style.top=p.y+(this.dragTransform.yScale-1)*(s.clientY-p.y)/this.dragTransform.yScale+"px",o.style.transformOrigin="0px 0px"}let{top:u,left:c}=o.getBoundingClientRect(),d=this.el.getBoundingClientRect();c-=d.left,u-=d.top;let g={position:{top:u*this.dragTransform.xScale,left:c*this.dragTransform.yScale}};if(a._temporaryRemoved){if(a.x=Math.max(0,Math.round(c/t)),a.y=Math.max(0,Math.round(u/e)),delete a.autoPosition,this.engine.nodeBoundFix(a),!this.engine.willItFit(a)){if(a.autoPosition=!0,!this.engine.willItFit(a)){z.off(n,"drag");return}a._willFitPos&&(h.copyPos(a,a._willFitPos),delete a._willFitPos)}this._onStartMoving(o,s,g,a,t,e)}else this._dragOrResize(o,s,g,a,t,e)};return z.droppable(this.el,{accept:s=>{let n=s.gridstackNode||this._readAttr(s,!1);if(n?.grid===this)return!0;if(!this.opts.acceptWidgets)return!1;let o=!0;if(typeof this.opts.acceptWidgets=="function")o=this.opts.acceptWidgets(s);else{let a=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;o=s.matches(a)}if(o&&n&&this.opts.maxRow){let a={w:n.w,h:n.h,minW:n.minW,minH:n.minH};o=this.engine.willItFit(a)}return o}}).on(this.el,"dropover",(s,n,o)=>{let a=o?.gridstackNode||n.gridstackNode;if(a?.grid===this&&!a._temporaryRemoved)return!1;if(a?._sidebarOrig&&(a.w=a._sidebarOrig.w,a.h=a._sidebarOrig.h),a?.grid&&a.grid!==this&&!a._temporaryRemoved&&a.grid._leave(n,o),o=o||n,t=this.cellWidth(),e=this.getCellHeight(!0),!a){let d=o.getAttribute("data-gs-widget")||o.getAttribute("gridstacknode");if(d){try{a=JSON.parse(d)}catch{console.error("Gridstack dropover: Bad JSON format: ",d)}o.removeAttribute("data-gs-widget"),o.removeAttribute("gridstacknode")}a||(a=this._readAttr(o)),a._sidebarOrig={w:a.w,h:a.h}}a.grid||(a.el||(a=f({},a)),a._isExternal=!0,o.gridstackNode=a);let u=a.w||Math.round(o.offsetWidth/t)||1,c=a.h||Math.round(o.offsetHeight/e)||1;return a.grid&&a.grid!==this?(n._gridstackNodeOrig||(n._gridstackNodeOrig=a),n.gridstackNode=a=v(f({},a),{w:u,h:c,grid:this}),delete a.x,delete a.y,this.engine.cleanupNode(a).nodeBoundFix(a),a._initDD=a._isExternal=a._temporaryRemoved=!0):(a.w=u,a.h=c,a._temporaryRemoved=!0),l._itemRemoving(a.el,!1),z.on(n,"drag",i),i(s,n,o),!1}).on(this.el,"dropout",(s,n,o)=>{let a=o?.gridstackNode||n.gridstackNode;return a&&(!a.grid||a.grid===this)&&(this._leave(n,o),this._isTemp&&this.removeAsSubGrid(a)),!1}).on(this.el,"drop",(s,n,o)=>{let a=o?.gridstackNode||n.gridstackNode;if(a?.grid===this&&!a._isExternal)return!1;let u=!!this.placeholder.parentElement,c=n!==o;this.placeholder.remove(),delete this.placeholder.gridstackNode,u&&this.opts.animate&&(this.setAnimation(!1),this.setAnimation(!0,!0));let d=n._gridstackNodeOrig;if(delete n._gridstackNodeOrig,u&&d?.grid&&d.grid!==this){let p=d.grid;p.engine.removeNodeFromLayoutCache(d),p.engine.removedNodes.push(d),p._triggerRemoveEvent()._triggerChangeEvent(),p.parentGridNode&&!p.engine.nodes.length&&p.opts.subGridDynamic&&p.removeAsSubGrid()}if(!a||(u&&(this.engine.cleanupNode(a),a.grid=this),delete a.grid?._isTemp,z.off(n,"drag"),o!==n?(o.remove(),n=o):n.remove(),this._removeDD(n),!u))return!1;let g=a.subGrid?.el?.gridstack;return h.copyPos(a,this._readAttr(this.placeholder)),h.removePositioningStyles(n),c&&(a.content||a.subGridOpts||l.addRemoveCB)?(delete a.el,n=this.addWidget(a)):(this._prepareElement(n,!0,a),this.el.appendChild(n),this.resizeToContentCheck(!1,a),g&&(g.parentGridNode=a),this._updateContainerHeight()),this.engine.addedNodes.push(a),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped(v(f({},s),{type:"dropped"}),d&&d.grid?d:void 0,a),!1}),this}static _itemRemoving(e,t){if(!e)return;let i=e?e.gridstackNode:void 0;!i?.grid||e.classList.contains(i.grid.opts.removableOptions.decline)||(t?i._isAboutToRemove=!0:delete i._isAboutToRemove,t?e.classList.add("grid-stack-item-removing"):e.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(typeof this.opts.removable!="string")return this;let e=document.querySelector(this.opts.removable);return e?(!this.opts.staticGrid&&!z.isDroppable(e)&&z.droppable(e,this.opts.removableOptions).on(e,"dropover",(t,i)=>l._itemRemoving(i,!0)).on(e,"dropout",(t,i)=>l._itemRemoving(i,!1)),this):this}prepareDragDrop(e,t=!1){let i=e?.gridstackNode;if(!i)return;let s=i.noMove||this.opts.disableDrag,n=i.noResize||this.opts.disableResize,o=this.opts.staticGrid||s&&n;if((t||o)&&(i._initDD&&(this._removeDD(e),delete i._initDD),o&&e.classList.add("ui-draggable-disabled","ui-resizable-disabled"),!t))return this;if(!i._initDD){let a,u,c=(p,E)=>{this.triggerEvent(p,p.target),a=this.cellWidth(),u=this.getCellHeight(!0),this._onStartMoving(e,p,E,i,a,u)},d=(p,E)=>{this._dragOrResize(e,p,E,i,a,u)},g=p=>{this.placeholder.remove(),delete this.placeholder.gridstackNode,delete i._moving,delete i._resizing,delete i._event,delete i._lastTried;let E=i.w!==i._orig.w,R=p.target;if(!(!R.gridstackNode||R.gridstackNode.grid!==this)){if(i.el=R,i._isAboutToRemove){let N=e.gridstackNode.grid;N._gsEventHandler[p.type]&&N._gsEventHandler[p.type](p,R),N.engine.nodes.push(i),N.removeWidget(e,!0,!0)}else h.removePositioningStyles(R),i._temporaryRemoved?(this._writePosAttr(R,i),this.engine.addNode(i)):this._writePosAttr(R,i),this.triggerEvent(p,R);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),p.type==="resizestop"&&(Number.isInteger(i.sizeToContent)&&(i.sizeToContent=i.h),this.resizeToContentCheck(E,i))}};z.draggable(e,{start:c,stop:g,drag:d}).resizable(e,{start:c,stop:g,resize:d}),i._initDD=!0}return z.draggable(e,s?"disable":"enable").resizable(e,n?"disable":"enable"),this}_onStartMoving(e,t,i,s,n,o){if(this.engine.cleanNodes().beginUpdate(s),this._writePosAttr(this.placeholder,s),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=s,s.grid?.el)this.dragTransform=h.getValuesFromTransformedElement(e);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){let a=this.placeholder.closest(".grid-stack");this.dragTransform=h.getValuesFromTransformedElement(a)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};if(s.el=this.placeholder,s._lastUiPosition=i.position,s._prevYPix=i.position.top,s._moving=t.type==="dragstart",s._resizing=t.type==="resizestart",delete s._lastTried,t.type==="dropover"&&s._temporaryRemoved&&(this.engine.addNode(s),s._moving=!0),this.engine.cacheRects(n,o,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),t.type==="resizestart"){let a=this.getColumn()-s.x,u=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-s.y;z.resizable(e,"option","minWidth",n*Math.min(s.minW||1,a)).resizable(e,"option","minHeight",o*Math.min(s.minH||1,u)).resizable(e,"option","maxWidth",n*Math.min(s.maxW||Number.MAX_SAFE_INTEGER,a)).resizable(e,"option","maxWidthMoveLeft",n*Math.min(s.maxW||Number.MAX_SAFE_INTEGER,s.x+s.w)).resizable(e,"option","maxHeight",o*Math.min(s.maxH||Number.MAX_SAFE_INTEGER,u)).resizable(e,"option","maxHeightMoveUp",o*Math.min(s.maxH||Number.MAX_SAFE_INTEGER,s.y+s.h))}}_dragOrResize(e,t,i,s,n,o){let a=f({},s._orig),u,c=this.opts.marginLeft,d=this.opts.marginRight,g=this.opts.marginTop,p=this.opts.marginBottom,E=Math.round(o*.1),R=Math.round(n*.1);if(c=Math.min(c,R),d=Math.min(d,R),g=Math.min(g,E),p=Math.min(p,E),t.type==="drag"){if(s._temporaryRemoved)return;let A=i.position.top-s._prevYPix;s._prevYPix=i.position.top,this.opts.draggable.scroll!==!1&&h.updateScrollPosition(e,i.position,A);let re=i.position.left+(i.position.left>s._lastUiPosition.left?-d:c),Pe=i.position.top+(i.position.top>s._lastUiPosition.top?-p:g);a.x=Math.round(re/n),a.y=Math.round(Pe/o);let Ie=this._extraDragRow;if(this.engine.collide(s,a)){let ne=this.getRow(),oe=Math.max(0,a.y+s.h-ne);this.opts.maxRow&&ne+oe>this.opts.maxRow&&(oe=Math.max(0,this.opts.maxRow-ne)),this._extraDragRow=oe}else this._extraDragRow=0;if(this._extraDragRow!==Ie&&this._updateContainerHeight(),s.x===a.x&&s.y===a.y)return}else if(t.type==="resize"){if(a.x<0||(h.updateScrollResize(t,e,o),a.w=Math.round((i.size.width-c)/n),a.h=Math.round((i.size.height-g)/o),s.w===a.w&&s.h===a.h)||s._lastTried&&s._lastTried.w===a.w&&s._lastTried.h===a.h)return;let A=i.position.left+c,re=i.position.top+g;a.x=Math.round(A/n),a.y=Math.round(re/o),u=!0}s._event=t,s._lastTried=a;let N={x:i.position.left+c,y:i.position.top+g,w:(i.size?i.size.width:s.w*n)-c-d,h:(i.size?i.size.height:s.h*o)-g-p};if(this.engine.moveNodeCheck(s,v(f({},a),{cellWidth:n,cellHeight:o,rect:N,resizing:u}))){s._lastUiPosition=i.position,this.engine.cacheRects(n,o,g,d,p,c),delete s._skipDown,u&&s.subGrid&&s.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();let A=t.target;s._sidebarOrig||this._writePosAttr(A,s),this.triggerEvent(t,A)}}triggerEvent(e,t){let i=this;for(;i.parentGridNode;)i=i.parentGridNode.grid;i._gsEventHandler[e.type]&&i._gsEventHandler[e.type](e,t)}_leave(e,t){t=t||e;let i=t.gridstackNode;if(!i||(t.style.transform=t.style.transformOrigin=null,z.off(e,"drag"),i._temporaryRemoved))return;i._temporaryRemoved=!0,this.engine.removeNode(i),i.el=i._isExternal&&t?t:e;let s=i._sidebarOrig;i._isExternal&&this.engine.cleanupNode(i),i._sidebarOrig=s,this.opts.removable===!0&&l._itemRemoving(e,!0),e._gridstackNodeOrig?(e.gridstackNode=e._gridstackNodeOrig,delete e._gridstackNodeOrig):i._isExternal&&this.engine.restoreInitial()}}return l.renderCB=(r,e)=>{r&&e?.content&&(r.textContent=e.content)},l.resizeToContentParent=".grid-stack-item-content",l.Utils=h,l.Engine=ye,l.GDRev="12.4.2",l})();var Le=["container"],Fe=["*"];function Ue(l,r){}var Ve=["*",[["","empty-content",""]]],$e=["*","[empty-content]"];function Ye(l,r){l&1&&K(0,1,["*ngIf","isEmpty"])}function je(l,r){}var se=(()=>{class l{constructor(e){this.elementRef=e,this.el._gridItemComp=this}set options(e){let t=this.el.gridstackNode?.grid;t?t.update(this.el,e):this._options=v(f({},e),{el:this.el})}get options(){return this.el.gridstackNode||this._options||{el:this.el}}get el(){return this.elementRef.nativeElement}clearOptions(){delete this._options}ngOnDestroy(){this.clearOptions(),delete this.childWidget,delete this.el._gridItemComp,delete this.container,delete this.ref}}return l.\u0275fac=function(e){return new(e||l)(de(le))},l.\u0275cmp=$({type:l,selectors:[["gridstack-item"]],viewQuery:function(e,t){if(e&1&&q(Le,7,he),e&2){let i;B(i=P())&&(t.container=i.first)}},inputs:{options:"options"},ngContentSelectors:Fe,decls:5,vars:1,consts:[["container",""],[1,"grid-stack-item-content"]],template:function(e,t){e&1&&(ge(),Ee(0,"div",1),xe(1,Ue,0,0,"ng-template",null,0,fe),K(3),_(4),Ce()),e&2&&(x(4),J(" ",t.options.content," "))},styles:["[_nghost-%COMP%]{display:block}"]}),l})(),X=(()=>{class l{constructor(e){this.elementRef=e,this.addedCB=new T,this.changeCB=new T,this.disableCB=new T,this.dragCB=new T,this.dragStartCB=new T,this.dragStopCB=new T,this.droppedCB=new T,this.enableCB=new T,this.removedCB=new T,this.resizeCB=new T,this.resizeStartCB=new T,this.resizeStopCB=new T,S.addRemoveCB||(S.addRemoveCB=qe),S.saveCB||(S.saveCB=Xe),S.updateCB||(S.updateCB=Qe),this.el._gridComp=this}set options(e){this._grid?this._grid.updateOptions(e):this._options=e}get options(){return this._grid?.opts||this._options||{}}get el(){return this.elementRef.nativeElement}get grid(){return this._grid}static addComponentToSelectorType(e){e.forEach(t=>l.selectorToType[l.getSelector(t)]=t)}static getSelector(e){return De(e).selector}ngOnInit(){this.loaded=!!this.options?.children?.length,this._grid=S.init(this._options,this.el),delete this._options,this.checkEmpty()}ngAfterContentInit(){this._sub=this.gridstackItems?.changes.subscribe(()=>this.updateAll()),this.loaded||this.updateAll(),this.hookEvents(this.grid)}ngOnDestroy(){this.unhookEvents(this._grid),this._sub?.unsubscribe(),this._grid?.destroy(),delete this._grid,delete this.el._gridComp,delete this.container,delete this.ref}updateAll(){if(!this.grid)return;let e=[];this.gridstackItems?.forEach(t=>{e.push(t.options),t.clearOptions()}),this.grid.load(e)}checkEmpty(){this.grid&&(this.isEmpty=!this.grid.engine.nodes.length)}hookEvents(e){e&&(e.parentGridNode||e.on("added",(t,i)=>{(i[0].grid?.el._gridComp||this).checkEmpty(),this.addedCB.emit({event:t,nodes:i})}).on("change",(t,i)=>this.changeCB.emit({event:t,nodes:i})).on("disable",t=>this.disableCB.emit({event:t})).on("drag",(t,i)=>this.dragCB.emit({event:t,el:i})).on("dragstart",(t,i)=>this.dragStartCB.emit({event:t,el:i})).on("dragstop",(t,i)=>this.dragStopCB.emit({event:t,el:i})).on("dropped",(t,i,s)=>this.droppedCB.emit({event:t,previousNode:i,newNode:s})).on("enable",t=>this.enableCB.emit({event:t})).on("removed",(t,i)=>{(i[0].grid?.el._gridComp||this).checkEmpty(),this.removedCB.emit({event:t,nodes:i})}).on("resize",(t,i)=>this.resizeCB.emit({event:t,el:i})).on("resizestart",(t,i)=>this.resizeStartCB.emit({event:t,el:i})).on("resizestop",(t,i)=>this.resizeStopCB.emit({event:t,el:i})))}unhookEvents(e){e&&(e.parentGridNode||e.off("added change disable drag dragstart dragstop dropped enable removed resize resizestart resizestop"))}}return l.selectorToType={},l.\u0275fac=function(e){return new(e||l)(de(le))},l.\u0275cmp=$({type:l,selectors:[["gridstack"]],contentQueries:function(e,t,i){if(e&1&&ke(i,se,4),e&2){let s;B(s=P())&&(t.gridstackItems=s)}},viewQuery:function(e,t){if(e&1&&q(Le,7,he),e&2){let i;B(i=P())&&(t.container=i.first)}},inputs:{options:"options",isEmpty:"isEmpty"},outputs:{addedCB:"addedCB",changeCB:"changeCB",disableCB:"disableCB",dragCB:"dragCB",dragStartCB:"dragStartCB",dragStopCB:"dragStopCB",droppedCB:"droppedCB",enableCB:"enableCB",removedCB:"removedCB",resizeCB:"resizeCB",resizeStartCB:"resizeStartCB",resizeStopCB:"resizeStopCB"},ngContentSelectors:$e,decls:4,vars:1,consts:[["container",""],[4,"ngIf"]],template:function(e,t){e&1&&(ge(Ve),ve(0,Ye,1,0,"ng-content",1)(1,je,0,0,"ng-template",null,0,fe),K(3)),e&2&&O("ngIf",t.isEmpty)},dependencies:[Te],styles:["[_nghost-%COMP%]{display:block}"]}),l})();function qe(l,r,e,t){if(e){if(!l)return;if(t){let i=l.parentElement?._gridItemComp;if(!i)return;let n=(i.childWidget?.container||i.container)?.createComponent(X),o=n?.instance;return o?(o.ref=n,o.options=r,o.el):void 0}else{let s=l._gridComp?.container?.createComponent(se),n=s?.instance;if(!n)return;n.ref=s;let o=r.selector,a=o?X.selectorToType[o]:void 0;if(a){let u=()=>{let d=n.container?.createComponent(a)?.instance;d&&typeof d.serialize=="function"&&typeof d.deserialize=="function"&&(n.childWidget=d,d.deserialize(r))};r.lazyLoad||r.grid?.opts?.lazyLoad&&r.lazyLoad!==!1?r.visibleObservable||(r.visibleObservable=new IntersectionObserver(([d])=>{d.isIntersecting&&(r.visibleObservable?.disconnect(),delete r.visibleObservable,u())}),window.setTimeout(()=>r.visibleObservable?.observe(n.el))):u()}return n.el}}else if(t){let i=r.el?._gridComp;i?.ref?i.ref.destroy():i?.ngOnDestroy()}else{let i=r.el?._gridItemComp;i?.ref?i.ref.destroy():i?.ngOnDestroy()}}function Xe(l,r){let e=l.el?._gridItemComp;if(e){let i=e.childWidget?.serialize();i&&(r.input=i);return}let t=l.el?._gridComp}function Qe(l){let r=l,e=l.el?._gridItemComp;e?.childWidget&&r.input&&e.childWidget.deserialize(r)}var Ke=(l,r)=>r.id,Je=(l,r)=>r.type;function Ze(l,r){if(l&1){let e=Q();b(0,"button",14),L("click",function(){let i=U(e).$implicit,s=H(3);return s.addItem(i.type),V(s.showAddMenu.set(!1))})("keydown.enter",function(){let i=U(e).$implicit,s=H(3);return s.addItem(i.type),V(s.showAddMenu.set(!1))}),C(1,"i",15),b(2,"span"),_(3),y()()}if(l&2){let e=r.$implicit;x(),me(e.icon),x(2),pe(e.label)}}function et(l,r){if(l&1&&(b(0,"div",12),ce(1,Ze,4,3,"button",13,Je),y()),l&2){let e=H(2);x(),ue(e.availableItems)}}function tt(l,r){if(l&1){let e=Q();b(0,"div",7)(1,"button",10),L("click",function(){U(e);let i=H();return V(i.toggleAddMenu())}),C(2,"i",11),_(3," \u65B0\u589E\u76E3\u63A7\u7D44\u4EF6 "),y(),Y(4,et,3,0,"div",12),y()}if(l&2){let e=H();x(),we("aria-expanded",e.showAddMenu()),x(),ze("transform",e.showAddMenu()?"rotate(45deg)":"rotate(0)"),x(2),j(e.showAddMenu()?4:-1)}}function it(l,r){if(l&1){let e=Q();b(0,"button",22),L("click",function(){U(e);let i=H().$implicit,s=H();return V(s.removeItem(i))}),C(1,"i",23),y()}}function st(l,r){l&1&&(b(0,"div",17)(1,"div",24),C(2,"div",25)(3,"div",26)(4,"div",27),y(),b(5,"div",28)(6,"div",29),_(7,"Aviation"),y(),b(8,"h3"),_(9,"\u98DB\u822A\u7BA1\u5236\u7CFB\u7D71"),y(),b(10,"span",30),_(11,"12 \u67B6\u6B21\u76E3\u63A7\u4E2D"),y()()())}function rt(l,r){l&1&&(b(0,"div",18)(1,"div",31),C(2,"i",32),y(),b(3,"div",28)(4,"h3"),_(5,"CERT \u61C9\u8B8A\u7CFB\u7D71"),y(),C(6,"p-tag",33),y(),C(7,"div",34),y()),l&2&&(x(6),O("rounded",!0))}function nt(l,r){l&1&&(b(0,"div",19)(1,"div",28)(2,"div",29),_(3,"Maintenance"),y(),b(4,"h3"),_(5,"\u8CC7\u8A0A\u8A2D\u5099\u5831\u4FEE"),y(),b(6,"span",35),_(7," \u9032\u5165\u7BA1\u7406\u5F8C\u53F0 "),C(8,"i",36),y()(),b(9,"div",37),C(10,"i",38),y()())}function ot(l,r){l&1&&(b(0,"div",20)(1,"div",31),C(2,"i",39),y(),b(3,"div",28)(4,"h3"),_(5,"\u6559\u52D9\u884C\u653F\u7CFB\u7D71"),y(),b(6,"span",35),_(7," \u9032\u5165\u7BA1\u7406\u5F8C\u53F0 "),C(8,"i",36),y()()())}function at(l,r){l&1&&(b(0,"div",21)(1,"div",40),C(2,"i",41),y(),b(3,"div",28)(4,"div",29),_(5,"System Control"),y(),b(6,"h3"),_(7,"\u6B0A\u9650\u8A2D\u5B9A"),y(),b(8,"div",42)(9,"span",43),_(10,"24 \u4F4D\u7BA1\u7406\u54E1\u5728\u7DDA"),y()()()())}function lt(l,r){if(l&1&&(b(0,"gridstack-item",9),Y(1,it,2,0,"button",16),Y(2,st,12,0,"div",17)(3,rt,8,1,"div",18)(4,nt,11,0,"div",19)(5,ot,9,0,"div",20)(6,at,11,0,"div",21),y()),l&2){let e,t=r.$implicit,i=H();O("options",t),x(),j(i.isEditMode()?1:-1),x(),j((e=t.type)==="flight"?2:e==="cert"?3:e==="repair"?4:e==="edu"?5:e==="permission"?6:-1)}}var Be=class l{gridComp;now=new Date;constructor(){setInterval(()=>{this.now=new Date},6e4)}get formattedDate(){return new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(this.now)}gridOptions={margin:6,minRow:1,cellHeight:70,columnOpts:{breakpoints:[{w:768,c:1}]},staticGrid:!0};items=[{x:0,y:0,minW:3,minH:3,id:"1",type:"flight"},{x:3,y:0,minW:3,minH:3,id:"2",type:"cert"},{x:6,y:0,minW:6,minH:6,id:"3",type:"repair"},{x:0,y:1,minW:3,minH:3,id:"4",type:"edu"},{x:3,y:1,minW:3,minH:3,id:"5",type:"permission"}];onChange(r){console.log("change ",r.nodes.length>1?r.nodes:r.nodes[0])}addNgFor(){}deleteNgFor(){this.items.pop()}modifyNgFor(){let r=this.gridComp?.gridstackItems?.get(0);r&&(r.options={w:3})}onResizeStop(r){console.log("resizestop ",r.el.gridstackNode)}identify(r,e){return e.id}isEditMode=ae(!1);toggleEditMode(){this.isEditMode.update(e=>!e);let r=this.gridComp?.grid;if(r){let e=this.isEditMode();r.setStatic(!e)}}showAddMenu=ae(!1);toggleAddMenu(){this.showAddMenu.update(r=>!r)}availableItems=[{label:"\u98DB\u822A\u7BA1\u5236\u7CFB\u7D71",type:"flight",icon:"pi pi-send"},{label:"CERT \u61C9\u8B8A\u7CFB\u7D71",type:"cert",icon:"pi pi-shield"},{label:"\u8CC7\u8A0A\u8A2D\u5099\u5831\u4FEE",type:"repair",icon:"pi pi-wrench"},{label:"\u6559\u52D9\u884C\u653F\u7CFB\u7D71",type:"edu",icon:"pi pi-graduation-cap"},{label:"\u6B0A\u9650\u8A2D\u5B9A",type:"permission",icon:"pi pi-cog"}];addItem(r){let e=this.availableItems.find(i=>i.type===r),t={id:`item-${Date.now()}`,x:0,y:0,w:3,h:3,minW:2,minH:2,type:r};this.items=[...this.items,t],this.showAddMenu.set(!1)}removeItem(r){this.items=this.items.filter(e=>e.id!==r.id)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=$({type:l,selectors:[["app-grid"]],viewQuery:function(e,t){if(e&1&&q(X,5),e&2){let i;B(i=P())&&(t.gridComp=i.first)}},decls:18,vars:8,consts:[[1,"portal-layout"],[1,"portal-bg-accent"],[1,"portal-header"],[1,"welcome-msg"],[1,"date"],[1,"admin-controls"],[1,"glass-btn",3,"click"],[1,"add-item-wrapper"],[3,"changeCB","resizeStopCB","options"],[3,"options"],["type","button","aria-haspopup","true",1,"glass-btn","add-main-btn",3,"click","aria-expanded"],[1,"pi","pi-plus",2,"transition","transform 0.3s"],["role","menu",1,"add-menu-panel"],["role","menuitem","type","button",1,"menu-option"],["role","menuitem","type","button",1,"menu-option",3,"click","keydown.enter"],["aria-hidden","true"],[1,"delete-badge"],[1,"bento-item","flight-item"],[1,"bento-item","cert-item"],[1,"bento-item","repair-hero"],[1,"bento-item","edu-item"],[1,"bento-item","permission-item"],[1,"delete-badge",3,"click"],[1,"pi","pi-times"],[1,"radar-container"],[1,"radar-sweep"],[1,"radar-point","p1"],[1,"radar-point","p2"],[1,"bento-content"],[1,"category"],[1,"flight-count"],[1,"bento-icon-sm"],[1,"pi","pi-shield"],["severity","danger","value","High Threat",3,"rounded"],[1,"emergency-pulse"],["role","button",1,"link-text"],[1,"pi","pi-external-link"],[1,"bento-icon"],[1,"pi","pi-wrench"],[1,"pi","pi-graduation-cap"],[1,"gear-abstract"],[1,"pi","pi-cog","gear-large"],[1,"access-info"],[1,"active-users"]],template:function(e,t){e&1&&(b(0,"div",0),C(1,"div",1),b(2,"header",2)(3,"div",3)(4,"span",4),_(5),y(),b(6,"h1"),_(7,"\u6838\u5FC3\u76E3\u63A7\u5165\u53E3 "),b(8,"span"),_(9,"Global Operations Portal"),y()()()(),b(10,"div",5)(11,"button",6),L("click",function(){return t.toggleEditMode()}),C(12,"i"),_(13),y(),Y(14,tt,5,4,"div",7),y(),b(15,"gridstack",8),L("changeCB",function(s){return t.onChange(s)})("resizeStopCB",function(s){return t.onResizeStop(s)}),ce(16,lt,7,3,"gridstack-item",9,Ke),y()()),e&2&&(Re("edit-active",t.isEditMode()),x(5),pe(t.formattedDate),x(7),me(t.isEditMode()?"pi pi-check":"pi pi-pencil"),x(),J(" ",t.isEditMode()?"\u5B8C\u6210\u914D\u7F6E":"\u81EA\u5B9A\u7FA9\u4F48\u5C40"," "),x(),j(t.isEditMode()?14:-1),x(),O("options",t.gridOptions),x(),ue(t.items))},dependencies:[He,Ne,X,se],styles:[`@charset "UTF-8";.grid-stack{position:relative}.grid-stack-rtl{direction:ltr}.grid-stack-rtl>.grid-stack-item{direction:rtl}.grid-stack-placeholder>.placeholder-content{background-color:#0000001a;margin:0;position:absolute;width:auto;z-index:0!important}.grid-stack>.grid-stack-item{position:absolute;padding:0;top:0;left:0;width:var(--gs-column-width);height:var(--gs-cell-height)}.grid-stack>.grid-stack-item>.grid-stack-item-content{margin:0;position:absolute;width:auto;overflow-x:hidden;overflow-y:auto}.grid-stack>.grid-stack-item.size-to-content:not(.size-to-content-max)>.grid-stack-item-content{overflow-y:hidden}.grid-stack>.grid-stack-item>.grid-stack-item-content,.grid-stack>.grid-stack-placeholder>.placeholder-content{top:var(--gs-item-margin-top);right:var(--gs-item-margin-right);bottom:var(--gs-item-margin-bottom);left:var(--gs-item-margin-left)}.grid-stack-item>.ui-resizable-handle{position:absolute;font-size:.1px;display:block;-ms-touch-action:none;touch-action:none}.grid-stack-item.ui-resizable-autohide>.ui-resizable-handle,.grid-stack-item.ui-resizable-disabled>.ui-resizable-handle{display:none}.grid-stack-item>.ui-resizable-ne,.grid-stack-item>.ui-resizable-nw,.grid-stack-item>.ui-resizable-se,.grid-stack-item>.ui-resizable-sw{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="%23666" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 20 20"><path d="m10 3 2 2H8l2-2v14l-2-2h4l-2 2"/></svg>');background-repeat:no-repeat;background-position:center}.grid-stack-item>.ui-resizable-ne{transform:rotate(45deg)}.grid-stack-item>.ui-resizable-sw{transform:rotate(45deg)}.grid-stack-item>.ui-resizable-nw{transform:rotate(-45deg)}.grid-stack-item>.ui-resizable-se{transform:rotate(-45deg)}.grid-stack-item>.ui-resizable-nw{cursor:nw-resize;width:20px;height:20px;top:var(--gs-item-margin-top);left:var(--gs-item-margin-left)}.grid-stack-item>.ui-resizable-n{cursor:n-resize;height:10px;top:var(--gs-item-margin-top);left:25px;right:25px}.grid-stack-item>.ui-resizable-ne{cursor:ne-resize;width:20px;height:20px;top:var(--gs-item-margin-top);right:var(--gs-item-margin-right)}.grid-stack-item>.ui-resizable-e{cursor:e-resize;width:10px;top:15px;bottom:15px;right:var(--gs-item-margin-right)}.grid-stack-item>.ui-resizable-se{cursor:se-resize;width:20px;height:20px;bottom:var(--gs-item-margin-bottom);right:var(--gs-item-margin-right)}.grid-stack-item>.ui-resizable-s{cursor:s-resize;height:10px;left:25px;bottom:var(--gs-item-margin-bottom);right:25px}.grid-stack-item>.ui-resizable-sw{cursor:sw-resize;width:20px;height:20px;bottom:var(--gs-item-margin-bottom);left:var(--gs-item-margin-left)}.grid-stack-item>.ui-resizable-w{cursor:w-resize;width:10px;top:15px;bottom:15px;left:var(--gs-item-margin-left)}.grid-stack-item.ui-draggable-dragging>.ui-resizable-handle{display:none!important}.grid-stack-item.ui-draggable-dragging{will-change:left,top}.grid-stack-item.ui-resizable-resizing{will-change:width,height}.ui-draggable-dragging,.ui-resizable-resizing{z-index:10000}.ui-draggable-dragging>.grid-stack-item-content,.ui-resizable-resizing>.grid-stack-item-content{box-shadow:1px 4px 6px #0003;opacity:.8}.grid-stack-animate,.grid-stack-animate .grid-stack-item{transition:left .3s,top .3s,height .3s,width .3s}.grid-stack-animate .grid-stack-item.grid-stack-placeholder,.grid-stack-animate .grid-stack-item.ui-draggable-dragging,.grid-stack-animate .grid-stack-item.ui-resizable-resizing{transition:left 0s,top 0s,height 0s,width 0s}.grid-stack>.grid-stack-item[gs-y="0"]{top:0}.grid-stack>.grid-stack-item[gs-x="0"]{left:0}.grid-stack-item .item-inner-container{width:100%;height:100%}.portal-layout{position:relative;padding:4rem 10%;background-color:#0f172a;color:#f8fafc;display:flex;flex-direction:column}.portal-layout .portal-bg-accent{position:absolute;top:-10%;right:-5%;width:600px;height:600px;background:radial-gradient(circle,rgba(99,102,241,.15) 0%,transparent 70%);pointer-events:none;z-index:0}.portal-header{position:relative;z-index:10;flex:0 0 auto;margin-bottom:2rem}.portal-header .welcome-msg .date{color:#94a3b8;font-size:.9rem;text-transform:uppercase;letter-spacing:2px}.portal-header .welcome-msg h1{font-size:2.5rem;margin:.5rem 0;font-weight:800}.portal-header .welcome-msg h1 span{font-weight:200;opacity:.6}.bento-grid-engine{flex:1 1 auto;background:transparent!important;position:relative;z-index:1;overflow:auto!important}:host ::ng-deep gridster{background:transparent!important}:host ::ng-deep gridster gridster-item{background:transparent!important;border-radius:24px}:host ::ng-deep gridster gridster-item .item-inner-container{width:100%;height:100%}.bento-item{background:#1e293bb3;border:1px solid rgba(255,255,255,.1);border-radius:24px;padding:2rem;position:relative;overflow:hidden;cursor:pointer;transition:all .3s ease;height:100%;box-sizing:border-box}.bento-item:hover{background:#334155cc;border-color:#6366f180}.bento-item:focus-visible{outline:none;box-shadow:0 0 0 3px #0f172a,0 0 0 6px #6366f1cc;transform:scale(1.02)}.flight-item{background:linear-gradient(135deg,#0f172a,#1e293b);border-color:#334155;position:relative;overflow:hidden}.flight-item:hover{border-color:#22d3ee}.flight-item:hover .radar-sweep{border-left-color:#22d3ee66}.flight-item .bento-content{position:relative;z-index:2}.flight-item h3{color:#22d3ee}.flight-item .flight-count{font-size:.85rem;color:#94a3b8}.flight-item .radar-container{position:absolute;right:-20px;top:-20px;width:200px;height:200px;border:1px solid rgba(34,211,238,.1);border-radius:50%;pointer-events:none}.flight-item .radar-container .radar-sweep{position:absolute;width:50%;height:50%;top:50%;left:50%;background:conic-gradient(from 0deg at 0% 0%,rgba(34,211,238,.2) 0%,transparent 25%);transform-origin:0% 0%;animation:radar-rotate 4s linear infinite}.flight-item .radar-container .radar-point{position:absolute;width:4px;height:4px;background:#22d3ee;border-radius:50%;box-shadow:0 0 10px #22d3ee}.flight-item .radar-container .radar-point.p1{top:40%;left:30%;animation:blink 2s infinite}.flight-item .radar-container .radar-point.p2{top:70%;left:60%;animation:blink 3s infinite}.permission-item{background:linear-gradient(135deg,#2e1065,#4c1d95);border-color:#5b21b6;position:relative}.permission-item:hover{border-color:#a78bfa}.permission-item:hover .gear-large{transform:rotate(90deg)}.permission-item:hover .gear-small{transform:rotate(-90deg)}.permission-item .gear-abstract{position:absolute;right:15px;top:15px;opacity:.2}.permission-item .gear-abstract i{position:absolute;transition:transform .8s cubic-bezier(.4,0,.2,1)}.permission-item .gear-abstract .gear-large{font-size:6rem;right:-20px;top:-20px}.permission-item .gear-abstract .gear-small{font-size:3rem;right:40px;top:50px}.permission-item h3{color:#ddd6fe}.permission-item .active-users{font-size:.85rem;color:#a78bfa;padding:2px 8px;background:#a78bfa1a;border-radius:4px;border:1px solid rgba(167,139,250,.2)}.permission-item:focus-visible{box-shadow:0 0 0 4px #0f172a,0 0 0 8px #a78bfa}.repair-hero{background:linear-gradient(135deg,#4f46e5,#7c3aed);display:flex;flex-direction:column;justify-content:flex-end}.repair-hero h2{font-size:2.2rem;margin:0;font-weight:800}.repair-hero .bento-icon{font-size:8rem;opacity:.1;position:absolute;right:-20px;top:-20px}.edu-item .bento-icon-sm{color:#38bdf8;font-size:1.5rem;margin-bottom:1rem}.edu-item .link-text{color:#38bdf8;font-size:.9rem;margin-top:1rem;display:block}.cert-item{background:#450a0a;border:1px solid #991b1b}.cert-item .bento-icon-sm{color:#ef4444;font-size:1.5rem;margin-bottom:1rem}.cert-item .emergency-pulse{position:absolute;top:1rem;right:1rem;width:10px;height:10px;background:#ef4444;border-radius:50%;box-shadow:0 0 #ef4444;animation:pulse 2s infinite}@keyframes radar-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes blink{0%,to{opacity:.2}50%{opacity:1}}@keyframes pulse{0%{transform:scale(.95);box-shadow:0 0 #ef4444b3}70%{transform:scale(1);box-shadow:0 0 0 10px #ef444400}to{transform:scale(.95);box-shadow:0 0 #ef444400}}.admin-controls{position:absolute;top:4rem;right:5%;display:flex;align-items:center;gap:8px;padding:6px;background:#1e293b66;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;border:1px solid rgba(255,255,255,.08);box-shadow:0 10px 30px #0000004d;z-index:2000}.glass-btn{background:#ffffff08;border:1px solid transparent;color:#f8fafc;padding:10px 20px;border-radius:12px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s cubic-bezier(.4,0,.2,1);font-weight:500;font-family:inherit}.glass-btn:hover{background:#6366f126;border-color:#6366f14d;color:#fff}.glass-btn i{font-size:1rem;opacity:.8}.add-item-wrapper{position:relative;display:inline-block}.add-menu-panel{position:absolute;top:calc(100% + 12px);right:0;width:240px;background:#0f172ae6;-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:6px;box-shadow:0 15px 40px #0009;z-index:2100;display:flex;flex-direction:column;gap:2px;transform-origin:top right;animation:slideDownPopup .4s cubic-bezier(.18,.89,.32,1.28)}.add-menu-panel .menu-option{background:transparent;border:none;width:100%;display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:10px;color:#94a3b8;cursor:pointer;transition:all .2s ease;text-align:left;font-family:inherit}.add-menu-panel .menu-option i{font-size:1.1rem;color:#6366f1;transition:transform .3s ease}.add-menu-panel .menu-option span{font-size:.9rem}.add-menu-panel .menu-option:hover,.add-menu-panel .menu-option:focus-visible{background:#ffffff0d;color:#fff;outline:none}.add-menu-panel .menu-option:hover i,.add-menu-panel .menu-option:focus-visible i{color:#818cf8;transform:scale(1.1)}.add-menu-panel .menu-option:active{transform:scale(.97)}@keyframes slideDownPopup{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes shake{0%{transform:rotate(0)}25%{transform:rotate(.4deg)}75%{transform:rotate(-.4deg)}to{transform:rotate(0)}}.shaking{animation:shake .4s infinite;opacity:.8}.delete-badge{position:absolute;top:14px;right:14px;width:30px;height:30px;border-radius:8px;background:#ef4444e6;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.2);color:#fff;z-index:50;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 4px 12px #ef44444d;transition:all .2s cubic-bezier(.175,.885,.32,1.275)}.delete-badge:hover{background:#f43f5e;transform:scale(1.1);box-shadow:0 4px 20px #ef444480}.delete-badge i{font-size:.8rem}
`],encapsulation:2})};export{Be as PortalGridstack};
