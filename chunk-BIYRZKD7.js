import{e as Oe,j as Se,k as Re,l as Pe}from"./chunk-UJVIMX6N.js";import{c as ye,e as Te}from"./chunk-WRN6NL4A.js";import{c as je,d as K,f as $,h as G,i as X,k as ee}from"./chunk-4O3FVBGX.js";import"./chunk-5HYNZ6JL.js";import"./chunk-754RMUN2.js";import{D as q,H as J,I,J as R,K as Me,M as Ee,N as ke,O as V,P as Y,R as Ie,T as De,q as S}from"./chunk-GIJAMQDZ.js";import{a as ve}from"./chunk-MHGFOFUR.js";import{i as he,k as Ce,m as xe,o as L}from"./chunk-FR2JHQ2I.js";import{$ as v,$b as ge,Ab as T,Cb as a,Da as s,Db as pe,Eb as me,F as z,Fb as b,Hb as h,Ia as w,Ib as C,Ja as re,Oa as N,Ob as de,Pb as A,Qb as D,R as P,Rb as _,S as ie,Sb as H,Ta as U,Tb as j,Ua as se,W as x,Xa as le,Xb as F,Yb as _e,Za as l,Zb as ue,aa as y,dc as O,gb as u,hb as g,ic as fe,ja as M,jb as ce,kb as Z,lb as W,mb as c,nb as m,oa as oe,ob as p,pb as E,tc as f,uc as be,vb as B,wb as k,x as ne,za as ae}from"./chunk-UT54V5MC.js";var Q=class t{http=x(ve);baseUrl=ye.apiUrl;getAllRoles(){return this.http.get(`${this.baseUrl}/admin/roles`)}getUsersWithRoles(){return this.http.get(`${this.baseUrl}/admin/users`)}updateUserRoles(n,e){return this.http.put(`${this.baseUrl}/admin/users/${n}/roles`,{roles:e})}deleteUser(n){return this.http.delete(`${this.baseUrl}/admin/users/${n}`)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ue=`
    .p-confirmdialog .p-dialog-content {
        display: flex;
        align-items: center;
        gap: dt('confirmdialog.content.gap');
    }

    .p-confirmdialog-icon {
        color: dt('confirmdialog.icon.color');
        font-size: dt('confirmdialog.icon.size');
        width: dt('confirmdialog.icon.size');
        height: dt('confirmdialog.icon.size');
    }
`;var Ve=["header"],$e=["footer"],Qe=["rejecticon"],ze=["accepticon"],Ne=["message"],Ze=["icon"],We=["headless"],He=[[["p-footer"]]],qe=["p-footer"],Je=(t,n,e)=>({$implicit:t,onAccept:n,onReject:e}),Ye=t=>({$implicit:t});function Ke(t,n){t&1&&B(0)}function Ge(t,n){if(t&1&&l(0,Ke,1,0,"ng-container",7),t&2){let e=a(2);c("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",ge(2,Je,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function Xe(t,n){t&1&&l(0,Ge,1,6,"ng-template",null,2,O)}function et(t,n){t&1&&B(0)}function tt(t,n){if(t&1&&l(0,et,1,0,"ng-container",8),t&2){let e=a(3);c("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function nt(t,n){t&1&&l(0,tt,1,1,"ng-template",null,4,O)}function it(t,n){}function ot(t,n){t&1&&l(0,it,0,0,"ng-template")}function at(t,n){if(t&1&&l(0,ot,1,0,null,8),t&2){let e=a(3);c("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function rt(t,n){if(t&1&&E(0,"i",12),t&2){let e=a(4);D(e.option("icon")),c("ngClass",e.cx("icon"))}}function st(t,n){if(t&1&&l(0,rt,1,3,"i",11),t&2){let e=a(3);c("ngIf",e.option("icon"))}}function lt(t,n){}function ct(t,n){t&1&&l(0,lt,0,0,"ng-template")}function pt(t,n){if(t&1&&l(0,ct,1,0,null,7),t&2){let e=a(3);c("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",ue(2,Ye,e.confirmation))}}function mt(t,n){if(t&1&&E(0,"span",13),t&2){let e=a(3);D(e.cx("message")),c("innerHTML",e.option("message"),ae)}}function dt(t,n){if(t&1&&(u(0,at,1,1)(1,st,1,1,"i",9),u(2,pt,1,4)(3,mt,1,3,"span",10)),t&2){let e=a(2);g(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),s(2),g(e.messageTemplate||e._messageTemplate?2:3)}}function _t(t,n){if(t&1&&(u(0,nt,2,0),l(1,dt,4,2,"ng-template",null,3,O)),t&2){let e=a();g(e.headerTemplate||e._headerTemplate?0:-1)}}function ut(t,n){t&1&&B(0)}function gt(t,n){if(t&1&&(me(0),l(1,ut,1,0,"ng-container",8)),t&2){let e=a(2);s(),c("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function ft(t,n){if(t&1&&E(0,"i"),t&2){let e=a(6);D(e.option("rejectIcon"))}}function bt(t,n){if(t&1&&l(0,ft,1,2,"i",17),t&2){let e=a(5);c("ngIf",e.option("rejectIcon"))}}function ht(t,n){}function Ct(t,n){t&1&&l(0,ht,0,0,"ng-template")}function xt(t,n){if(t&1&&(u(0,bt,1,1,"i",16),l(1,Ct,1,0,null,8)),t&2){let e=a(4);g(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?0:-1),s(),c("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function vt(t,n){if(t&1){let e=k();m(0,"p-button",15),T("onClick",function(){v(e);let i=a(3);return y(i.onReject())}),l(1,xt,2,2,"ng-template",null,5,O),p()}if(t&2){let e=a(3);c("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps())}}function yt(t,n){if(t&1&&E(0,"i"),t&2){let e=a(6);D(e.option("acceptIcon"))}}function Tt(t,n){if(t&1&&l(0,yt,1,2,"i",17),t&2){let e=a(5);c("ngIf",e.option("acceptIcon"))}}function Mt(t,n){}function Et(t,n){t&1&&l(0,Mt,0,0,"ng-template")}function kt(t,n){if(t&1&&(u(0,Tt,1,1,"i",16),l(1,Et,1,0,null,8)),t&2){let e=a(4);g(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?0:-1),s(),c("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function Ot(t,n){if(t&1){let e=k();m(0,"p-button",15),T("onClick",function(){v(e);let i=a(3);return y(i.onAccept())}),l(1,kt,2,2,"ng-template",null,5,O),p()}if(t&2){let e=a(3);c("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps())}}function It(t,n){if(t&1&&l(0,vt,3,4,"p-button",14)(1,Ot,3,4,"p-button",14),t&2){let e=a(2);c("ngIf",e.option("rejectVisible")),s(),c("ngIf",e.option("acceptVisible"))}}function Dt(t,n){if(t&1&&(u(0,gt,2,1),u(1,It,2,2)),t&2){let e=a();g(e.footerTemplate||e._footerTemplate?0:-1),s(),g(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var jt={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},Be=(()=>{class t extends Ie{name="confirmdialog";theme=Ue;classes=jt;static \u0275fac=(()=>{let e;return function(i){return(e||(e=oe(t)))(i||t)}})();static \u0275prov=P({token:t,factory:t.\u0275fac})}return t})();var St=X([$({transform:"{{transform}}",opacity:0}),K("{{transition}}",$({transform:"none",opacity:1}))]),Rt=X([K("{{transition}}",$({transform:"{{transform}}",opacity:0}))]),te=(()=>{class t extends De{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new w;footer;_componentStyle=x(Be);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=J("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;constructor(e,o){super(),this.confirmationService=e,this.zone=o,this.subscription=this.confirmationService.requireConfirmation$.subscribe(i=>{if(!i){this.hide();return}i.key===this.key&&(this.confirmation=i,Object.keys(i).forEach(r=>{this[r]=i[r]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new w,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new w,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?J("pn_id_")+"_header":null}option(e,o){let i=this;if(i.hasOwnProperty(e))return o?i[o]:i[e]}getButtonStyleClass(e,o){let i=this.cx(e),d=this.option(o);return[i,d].filter(Boolean).join(" ")}getElementToFocus(){if(this.dialog?.el?.nativeElement)switch(this.option("defaultFocus")){case"accept":return S(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return S(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return S(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return S(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",q(this.styleElement,"nonce",this.config?.csp()?.nonce),this.document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints)e+=`
                    @media screen and (max-width: ${o}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[o]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,q(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(I.CANCEL),this.hide(I.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(I.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(I.REJECT),this.hide(I.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.getAcceptButtonProps()?.label||this.config.getTranslation(Y.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.getRejectButtonProps()?.label||this.config.getTranslation(Y.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(o){return new(o||t)(N(R),N(re))};static \u0275cmp=U({type:t,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(o,i,d){if(o&1&&(b(d,Ee,5),b(d,Ve,4),b(d,$e,4),b(d,Qe,4),b(d,ze,4),b(d,Ne,4),b(d,Ze,4),b(d,We,4),b(d,ke,4)),o&2){let r;h(r=C())&&(i.footer=r.first),h(r=C())&&(i.headerTemplate=r.first),h(r=C())&&(i.footerTemplate=r.first),h(r=C())&&(i.rejectIconTemplate=r.first),h(r=C())&&(i.acceptIconTemplate=r.first),h(r=C())&&(i.messageTemplate=r.first),h(r=C())&&(i.iconTemplate=r.first),h(r=C())&&(i.headlessTemplate=r.first),h(r=C())&&(i.templates=r)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",f],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",f],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",f],dismissableMask:[2,"dismissableMask","dismissableMask",f],blockScroll:[2,"blockScroll","blockScroll",f],rtl:[2,"rtl","rtl",f],closable:[2,"closable","closable",f],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",f],baseZIndex:[2,"baseZIndex","baseZIndex",be],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",f],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",f]},outputs:{onHide:"onHide"},features:[F([Be]),le],ngContentSelectors:qe,decls:6,vars:16,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["icon",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable","baseZIndex","autoZIndex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"class","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"ngClass"],[3,"innerHTML"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(o,i){if(o&1){let d=k();pe(He),m(0,"p-dialog",6,0),T("visibleChange",function(Le){return v(d),y(i.onVisibleChange(Le))}),u(2,Xe,2,0)(3,_t,3,1),l(4,Dt,2,2,"ng-template",null,1,O),p()}o&2&&(A(i.style),c("visible",i.visible)("closable",i.option("closable"))("styleClass",i.cn(i.cx("root"),i.styleClass))("modal",!0)("header",i.option("header"))("closeOnEscape",i.option("closeOnEscape"))("blockScroll",i.option("blockScroll"))("appendTo",i.option("appendTo"))("position",i.position)("dismissableMask",i.dismissableMask)("draggable",i.draggable)("baseZIndex",i.baseZIndex)("autoZIndex",i.autoZIndex),s(2),g(i.headlessTemplate||i._headlessTemplate?2:3))},dependencies:[L,he,Ce,xe,Se,Pe,V],encapsulation:2,data:{animation:[je("animation",[G("void => visible",[ee(St)]),G("visible => void",[ee(Rt)])])]},changeDetection:0})}return t})(),Ae=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=se({type:t});static \u0275inj=ie({imports:[te,V,V]})}return t})();var wt=()=>({width:"420px"}),Ut=(t,n)=>n.id;function Bt(t,n){if(t&1&&(m(0,"div",4),_(1),p()),t&2){let e=a();s(),j(" ",e.error()," ")}}function At(t,n){if(t&1&&(m(0,"div",5),_(1),p()),t&2){let e=a();s(),j(" ",e.success()," ")}}function Ft(t,n){t&1&&(m(0,"div",6),_(1,"\u8F09\u5165\u4E2D..."),p())}function Lt(t,n){if(t&1){let e=k();m(0,"button",14),T("click",function(){let i=v(e).$implicit,d=a().$implicit,r=a(2);return y(r.toggleRole(d,i))}),_(1),p()}if(t&2){let e=n.$implicit,o=a().$implicit;de("active",o.roles.includes(e)),s(),j(" ",e," ")}}function Vt(t,n){if(t&1){let e=k();m(0,"tr")(1,"td"),_(2),p(),m(3,"td"),_(4),p(),m(5,"td")(6,"div",9),Z(7,Lt,2,3,"button",10,ce),p()(),m(9,"td")(10,"div",11)(11,"button",12),T("click",function(){let i=v(e).$implicit,d=a(2);return y(d.saveUserRoles(i))}),_(12),p(),m(13,"button",13),T("click",function(){let i=v(e).$implicit,d=a(2);return y(d.confirmDeleteUser(i))}),_(14," \u522A\u9664 "),p()()()()}if(t&2){let e=n.$implicit,o=a(2);s(2),H(e.name),s(2),H(e.email),s(3),W(o.allRoles()),s(4),c("disabled",o.savingUserId()===e.id),s(),j(" ",o.savingUserId()===e.id?"\u5132\u5B58\u4E2D...":"\u5132\u5B58"," "),s(),c("disabled",o.savingUserId()===e.id||o.currentUserId()===e.id)}}function $t(t,n){if(t&1&&(m(0,"table",7)(1,"thead")(2,"tr")(3,"th"),_(4,"\u540D\u7A31"),p(),m(5,"th"),_(6,"Email"),p(),m(7,"th"),_(8,"\u89D2\u8272"),p(),m(9,"th",8),_(10,"\u64CD\u4F5C"),p()()(),m(11,"tbody"),Z(12,Vt,15,5,"tr",null,Ut),p()()),t&2){let e=a();s(12),W(e.users())}}var Fe=class t{admin=x(Q);auth=x(Te);confirmationService=x(R);users=M([]);allRoles=M([]);loading=M(!1);savingUserId=M(null);error=M("");success=M("");currentUserId=fe(()=>this.auth.userSignal()?.id??null);ngOnInit(){this.loadData()}loadData(){this.loading.set(!0),this.error.set(""),this.success.set(""),ne({roles:this.admin.getAllRoles(),users:this.admin.getUsersWithRoles()}).pipe(z(()=>{this.loading.set(!1)})).subscribe({next:({roles:n,users:e})=>{this.allRoles.set(n),this.users.set(e)},error:()=>{this.error.set("\u8B80\u53D6\u89D2\u8272\u6216\u4F7F\u7528\u8005\u6E05\u55AE\u5931\u6557")}})}toggleRole(n,e){n.roles.includes(e)?n.roles=n.roles.filter(i=>i!==e):n.roles=[...n.roles,e]}saveUserRoles(n){this.savingUserId.set(n.id),this.error.set(""),this.success.set(""),this.admin.updateUserRoles(n.id,n.roles).subscribe({next:()=>{this.savingUserId.set(null),this.success.set("\u5DF2\u5132\u5B58\u8B8A\u66F4 \u{1F389}"),setTimeout(()=>this.success.set(""),2e3)},error:()=>{this.savingUserId.set(null),this.error.set("\u5132\u5B58\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66")}})}confirmDeleteUser(n){if(this.currentUserId()===n.id){this.error.set("\u4F60\u4E0D\u80FD\u522A\u9664\u81EA\u5DF1\u7684\u5E33\u865F"),setTimeout(()=>this.error.set(""),2e3);return}this.confirmationService.confirm({message:`\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u4F7F\u7528\u8005\u300C${n.email}\u300D\u55CE\uFF1F\u6B64\u52D5\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002`,header:"\u522A\u9664\u4F7F\u7528\u8005\u78BA\u8A8D",icon:"pi pi-exclamation-triangle",acceptLabel:"\u78BA\u5B9A\u522A\u9664",rejectLabel:"\u53D6\u6D88",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-text",accept:()=>this.deleteUser(n)})}deleteUser(n){this.savingUserId.set(n.id),this.error.set(""),this.success.set(""),this.admin.deleteUser(n.id).pipe(z(()=>this.savingUserId.set(null))).subscribe({next:()=>{this.users.update(e=>e.filter(o=>o.id!==n.id)),this.success.set("\u4F7F\u7528\u8005\u5DF2\u522A\u9664 \u{1F5D1}\uFE0F"),setTimeout(()=>this.success.set(""),2e3)},error:e=>{e?.status===400?this.error.set(e.error?.message??"\u4E0D\u80FD\u522A\u9664\u81EA\u5DF1\u5E33\u865F"):this.error.set("\u522A\u9664\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66"),setTimeout(()=>this.error.set(""),2e3)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=U({type:t,selectors:[["app-user-role-management"]],features:[F([R,Me])],decls:12,vars:7,consts:[[3,"baseZIndex"],[1,"role-page"],[1,"role-header"],[1,"subtitle"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"loading"],[1,"user-table"],[2,"width","180px"],[1,"role-list"],["type","button",1,"role-chip",3,"active"],[1,"action-buttons"],["type","button",1,"btn-primary",3,"click","disabled"],["type","button",1,"btn-danger",3,"click","disabled"],["type","button",1,"role-chip",3,"click"]],template:function(e,o){e&1&&(E(0,"p-confirmDialog",0),m(1,"div",1)(2,"header",2)(3,"div")(4,"h1"),_(5,"\u4F7F\u7528\u8005\u89D2\u8272\u7BA1\u7406"),p(),m(6,"p",3),_(7,"\u53EA\u6709 Admin / Manager \u53EF\u4EE5\u4F7F\u7528\u7684\u5F8C\u53F0\u9801\u9762\u3002"),p()()(),u(8,Bt,2,1,"div",4),u(9,At,2,1,"div",5),u(10,Ft,2,0,"div",6)(11,$t,14,0,"table",7),p()),e&2&&(A(_e(6,wt)),c("baseZIndex",1e4),s(8),g(o.error()?8:-1),s(),g(o.success()?9:-1),s(),g(o.loading()?10:11))},dependencies:[L,Oe,Ae,te,Re],styles:['@charset "UTF-8";.role-page[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-2xl);display:flex;flex-direction:column;gap:var(--space-lg);background:var(--color-bg-page);min-height:100%;color:var(--color-text-primary)}.role-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.role-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:var(--color-text-primary)}.role-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-top:4px;color:var(--color-text-subtle);font-size:14px}.user-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--color-bg-surface);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-md)}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--color-border-subtle);font-size:14px;color:var(--color-text-secondary)}.user-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-input)}.user-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:600}.user-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-hover)}.role-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.role-chip[_ngcontent-%COMP%]{border-radius:var(--radius-full);border:1px solid var(--color-border-subtle);padding:4px 10px;font-size:12px;background:var(--color-bg-input);color:var(--color-text-secondary);cursor:pointer;transition:all .15s ease}.role-chip.active[_ngcontent-%COMP%]{background:var(--color-primary);border-color:var(--color-primary);color:var(--color-on-primary)}.role-chip[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.action-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{min-width:72px}.action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{min-width:72px;background:#f04438;color:#fff;border-radius:999px;border:none;padding:6px 12px;font-size:13px;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#d92d20}.action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{padding:6px 14px;border-radius:999px;border:none;cursor:pointer;font-size:13px;font-weight:500;background:var(--color-primary, #5045e5);color:#fff;transition:background .15s ease,transform .1s ease,box-shadow .15s ease}.btn-primary[_ngcontent-%COMP%]:hover:enabled{background:#3f36c2;box-shadow:0 8px 18px #5045e540;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:default;box-shadow:none;transform:none}.btn-danger[_ngcontent-%COMP%]{padding:6px 14px;border-radius:999px;border:none;cursor:pointer;font-size:13px;font-weight:500;background:#f04438;color:#fff;transition:background .15s ease,transform .1s ease,box-shadow .15s ease}.btn-danger[_ngcontent-%COMP%]:hover:enabled{background:#d92d20;box-shadow:0 8px 18px #f044384d;transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:default;box-shadow:none;transform:none}.alert[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);font-size:13px}.alert.alert-error[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-danger) 10%,transparent);color:var(--color-danger)}.alert.alert-success[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-success) 10%,transparent);color:var(--color-success)}.loading[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-secondary)}']})};export{Fe as UserRoleManagementComponent};
